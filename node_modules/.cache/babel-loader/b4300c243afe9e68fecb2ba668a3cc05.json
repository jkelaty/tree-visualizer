{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jonathan Kelaty\\\\Desktop\\\\TreeVisualizer\\\\tree-visualizer\\\\src\\\\TreeVisualizer\\\\Trees\\\\BinarySearchTree\\\\BinarySearchTree.jsx\";\nimport React from 'react';\nimport { Transition, CSSTransition } from 'react-transition-group';\nimport InputModal from '../../Additional/InputModal/InputModal.jsx';\nimport ErrorMessage from '../../Additional/ErrorMessage/ErrorMessage.jsx';\nimport Queue from '../../Additional/Queue.js';\nimport { randomIntFromInverval } from '../../Additional/Helpers.js';\nimport './BinarySearchTree.scss';\n\nclass BinarySearchTreeNode {\n  constructor(val) {\n    this.value = val;\n    this.left = null;\n    this.right = null;\n    this.animations = {\n      initial: {\n        node: {\n          active: false,\n          delay: 0\n        },\n        line: {\n          active: false,\n          delay: 0\n        }\n      },\n      visited: {\n        node: {\n          active: false,\n          delay: 0\n        },\n        line: {\n          active: false,\n          delay: 0\n        }\n      },\n      success: {\n        node: {\n          active: false,\n          delay: 0\n        },\n        line: {\n          active: false,\n          delay: 0\n        }\n      },\n      removed: {\n        node: {\n          active: false,\n          delay: 0\n        },\n        line: {\n          active: false,\n          delay: 0\n        }\n      }\n    };\n    this.moveAnimations = {\n      active: false,\n      delay: 0,\n      css: {\n        entering: {},\n        entered: {},\n        exiting: {},\n        exited: {}\n      }\n    };\n  }\n\n}\n\nexport default class BinarySearchTree extends React.Component {\n  constructor(props) {\n    super(props);\n    this.initialStateOperation = 'Initial';\n    this.visibleClasses = {\n      appearDone: 'visible',\n      enterDone: 'visible',\n      exit: 'visible'\n    };\n    this.moveClasses = {\n      appearDone: 'move',\n      enterDone: 'move',\n      exit: 'moved',\n      exitActive: 'moved'\n    };\n    this.name = 'BinarySearchTree';\n    this.key = 'BST';\n    this.root = null;\n    this.removeValue = null;\n    this.targetValue = null;\n    this.targetNode = null;\n    this.state = {\n      initial: false\n    };\n    this.receiveInput = this.receiveInput.bind(this);\n    this.action1 = this.action1.bind(this); // temporary\n\n    this.action2 = this.action2.bind(this); // temporary\n\n    this.action3 = this.action3.bind(this); // temporary\n\n    this.action4 = this.action4.bind(this); // temporary\n\n    this.action5 = this.action5.bind(this); // temporary\n\n    this.action6 = this.action6.bind(this); // temporary\n\n    this.action7 = this.action7.bind(this); // temporary\n\n    this.action8 = this.action8.bind(this); // temporary\n\n    this.action9 = this.action9.bind(this); // temporary\n\n    this.action10 = this.action10.bind(this); // temporary\n\n    this.action11 = this.action11.bind(this); // temporary\n\n    this.action12 = this.action12.bind(this); // temporary\n\n    this.action13 = this.action13.bind(this); // temporary\n\n    this.action14 = this.action14.bind(this); // temporary\n  }\n\n  componentDidMount() {} // call generate function\n\n  /*static getDerivedStateFromProps(newProps, state) {\r\n      //To-do: async calls and tooltips\r\n      console.log(\"BST::getDerivedStateFromProps::newProps \"  + newProps.operation);\r\n      console.log(\"BST::getDerivedStateFromProps::state.operation \" + state.operation);\r\n      console.log(\"BST::getDerivedStateFromProps::state.animating \" + state.animating);\r\n        const initialStateOperation = 'Initial';\r\n        if ( state.animating ) {\r\n          if ( state.operation === initialStateOperation ) {\r\n              return { operation: state.operation, animating: false };\r\n          }\r\n          else {\r\n              return { operation: state.operation };\r\n          }\r\n      }\r\n      else if ( state.operation !== newProps.operation ) {\r\n          return { operation: newProps.operation, animating: true };\r\n      }\r\n      else {\r\n          return null;\r\n      }\r\n  }*/\n\n\n  insertNumElements(elements) {\n    for (let i = 0; i < elements; ++i) {\n      let val = randomIntFromInverval(1, 150);\n\n      if (this.insert(val)) {\n        if (this.height() > 5) {\n          this.root = this.remove(val);\n          --i;\n        }\n      } else {\n        --i;\n      }\n    }\n  }\n\n  reset() {\n    this.root = null;\n  }\n\n  height(node = this.root) {\n    if (node === null) return 0;\n    return Math.max(this.height(node.left), this.height(node.right)) + 1;\n  }\n\n  insert(val) {\n    if (this.root === null) {\n      this.root = new BinarySearchTreeNode(val);\n      return true;\n    }\n\n    let curr = this.root;\n\n    while (true) {\n      if (curr.value === val) {\n        //tree contains key already\n        return false;\n      } else if (curr.value < val) {\n        if (curr.right === null) {\n          curr.right = new BinarySearchTreeNode(val);\n          return true;\n        }\n\n        curr = curr.right;\n      } else {\n        if (curr.left === null) {\n          curr.left = new BinarySearchTreeNode(val);\n          return true;\n        }\n\n        curr = curr.left;\n      }\n    }\n  }\n\n  remove(val, node = this.root) {\n    if (!val) return;\n    if (node === null) return node;\n\n    if (val < node.value) {\n      node.left = this.remove(val, node.left);\n    } else if (val > node.value) {\n      node.right = this.remove(val, node.right);\n    } else {\n      if (node.left === null) {\n        return node.right;\n      } else if (node.right === null) {\n        return node.left;\n      } else {\n        node.value = this.inOrderSuccessor(node.right);\n        node.right = this.remove(node.value, node.right);\n      }\n    }\n\n    return node;\n  }\n\n  inOrderSuccessor(node) {\n    if (node === null) {//error\n    } else if (node.left !== null) {\n      return this.inOrderSuccessor(node.left);\n    } else {\n      return node.value;\n    }\n  }\n\n  getScaleFactor() {\n    let scale_factor = (window.innerWidth - 20) / (Math.pow(2, this.height() - 1) * 70);\n    return 'scale(' + (scale_factor > 1 ? 1 : scale_factor) + ')';\n  }\n\n  receiveInput(val) {\n    alert(val);\n  }\n\n  searchNode(val) {\n    this.action5(val);\n  }\n\n  deleteNode(val) {\n    this.action8(val);\n  }\n\n  Tree(node = this.root, tree_height = this.height(), curr_height = 0, pos = 'root') {\n    if (curr_height === tree_height) return null;\n    const leftChild = this.Tree(node ? node.left : null, tree_height, curr_height + 1, 'left');\n    const rightChild = this.Tree(node ? node.right : null, tree_height, curr_height + 1, 'right');\n    const classes = ['node-wrapper', pos].join(' ');\n\n    if (node === null) {\n      return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n        className: classes,\n        \"node-value\": \"null\",\n        \"node-layer\": tree_height - curr_height,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"node-value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269\n        },\n        __self: this\n      }), leftChild, rightChild));\n    } else {\n      const rootWidth = {\n        width: node === this.root ? Math.pow(2, tree_height - 1) * 70 + 'px' : null\n      };\n      return React.createElement(React.Fragment, null, React.createElement(Transition, {\n        in: node.moveAnimations['active'],\n        timeout: node.moveAnimations['delay'],\n        appear: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }, state => React.createElement(\"div\", {\n        className: classes,\n        \"node-value\": node.value,\n        \"node-layer\": tree_height - curr_height,\n        style: node === this.root ? rootWidth : node.moveAnimations['css'][state],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, React.createElement(CSSTransition, {\n        in: node.animations['initial']['node']['active'],\n        timeout: node.animations['initial']['node']['delay'],\n        classNames: this.visibleClasses,\n        appear: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"node-value\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, this.getNodeHover(node.value), this.getCricle(node))), leftChild, rightChild, this.getConnectingLine(node, pos))));\n    }\n  }\n\n  getCricle(node) {\n    return React.createElement(React.Fragment, null, React.createElement(\"svg\", {\n      className: \"circle node-value-circle\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327\n      },\n      __self: this\n    }, React.createElement(\"circle\", {\n      className: \"circle node-circle initial\",\n      r: \"24\",\n      cx: \"25\",\n      cy: \"25\",\n      fill: \"none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329\n      },\n      __self: this\n    }), React.createElement(CSSTransition, {\n      in: node.animations['visited']['node']['active'],\n      timeout: node.animations['visited']['node']['delay'],\n      classNames: this.visibleClasses,\n      appear: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, React.createElement(\"svg\", {\n      className: \"circle node-circle-traversal\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, React.createElement(\"circle\", {\n      className: \"circle node-circle-background visited\",\n      r: \"24\",\n      cx: \"25\",\n      cy: \"25\",\n      fill: \"none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }), React.createElement(\"circle\", {\n      className: \"circle node-circle visited\",\n      r: \"24\",\n      cx: \"25\",\n      cy: \"25\",\n      fill: \"none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }))), React.createElement(CSSTransition, {\n      in: node.animations['success']['node']['active'],\n      timeout: node.animations['success']['node']['delay'],\n      classNames: this.visibleClasses,\n      appear: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, React.createElement(\"svg\", {\n      className: \"circle node-circle-traversal\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, React.createElement(\"circle\", {\n      className: \"circle node-circle-background success\",\n      r: \"24\",\n      cx: \"25\",\n      cy: \"25\",\n      fill: \"none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }), React.createElement(\"circle\", {\n      className: \"circle node-circle success\",\n      r: \"24\",\n      cx: \"25\",\n      cy: \"25\",\n      fill: \"none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }))), React.createElement(CSSTransition, {\n      in: node.animations['removed']['node']['active'],\n      timeout: node.animations['removed']['node']['delay'],\n      classNames: this.visibleClasses,\n      appear: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    }, React.createElement(\"svg\", {\n      className: \"circle node-circle-traversal\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, React.createElement(\"circle\", {\n      className: \"circle node-circle-background removed\",\n      r: \"24\",\n      cx: \"25\",\n      cy: \"25\",\n      fill: \"none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    }), React.createElement(\"circle\", {\n      className: \"circle node-circle removed\",\n      r: \"24\",\n      cx: \"25\",\n      cy: \"25\",\n      fill: \"none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }))), React.createElement(\"text\", {\n      className: \"text node-value-text\",\n      x: \"50%\",\n      y: \"50%\",\n      fill: \"black\",\n      textAnchor: \"middle\",\n      dominantBaseline: \"central\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    }, node.value)));\n  }\n\n  getNodeHover(val) {\n    return React.createElement(React.Fragment, null, React.createElement(\"span\", {\n      className: \"node-hover\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"fas fa-search\",\n      onClick: () => this.searchNode(val),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"search\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }, React.createElement(\"svg\", {\n      className: \"circle\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, React.createElement(\"circle\", {\n      className: \"circle node-hover-circle\",\n      r: \"24\",\n      cx: \"25\",\n      cy: \"25\",\n      fill: \"none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    }))), React.createElement(\"i\", {\n      className: \"fas fa-trash\",\n      onClick: () => this.deleteNode(val),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"trash\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, React.createElement(\"svg\", {\n      className: \"circle\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }, React.createElement(\"circle\", {\n      className: \"circle node-hover-circle\",\n      r: \"24\",\n      cx: \"25\",\n      cy: \"25\",\n      fill: \"none\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    })))));\n  }\n\n  getConnectingLine(node, pos) {\n    if (pos === 'left' || pos === 'right') {\n      return React.createElement(React.Fragment, null, React.createElement(CSSTransition, {\n        in: node.animations['initial']['line']['active'],\n        timeout: node.animations['initial']['line']['delay'],\n        classNames: this.visibleClasses,\n        appear: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 405\n        },\n        __self: this\n      }, React.createElement(\"svg\", {\n        className: \"line node-line\",\n        xmlns: \"http://www.w3.org/2000/svg\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 411\n        },\n        __self: this\n      }, this.getLine(pos, 'initial'), React.createElement(CSSTransition, {\n        in: node.animations['visited']['line']['active'],\n        timeout: node.animations['visited']['line']['delay'],\n        classNames: this.visibleClasses,\n        appear: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 415\n        },\n        __self: this\n      }, this.getLine(pos, 'visited')), React.createElement(CSSTransition, {\n        in: node.animations['success']['line']['active'],\n        timeout: node.animations['success']['line']['delay'],\n        classNames: this.visibleClasses,\n        appear: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425\n        },\n        __self: this\n      }, this.getLine(pos, 'success')), React.createElement(CSSTransition, {\n        in: node.animations['removed']['line']['active'],\n        timeout: node.animations['removed']['line']['delay'],\n        classNames: this.visibleClasses,\n        appear: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 435\n        },\n        __self: this\n      }, this.getLine(pos, 'removed')))));\n    } else {\n      return null;\n    }\n  }\n\n  getLine(pos, addClass) {\n    const classes = ['line', addClass].join(' ');\n    if (pos === 'left') return React.createElement(\"line\", {\n      className: classes,\n      x1: \"0\",\n      y1: \"50\",\n      x2: \"100%\",\n      y2: \"0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 460\n      },\n      __self: this\n    });else if (pos === 'right') return React.createElement(\"line\", {\n      className: classes,\n      x1: \"0\",\n      y1: \"0\",\n      x2: \"100%\",\n      y2: \"50\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462\n      },\n      __self: this\n    });else return null;\n  }\n\n  setGenerationAnimations() {\n    let queue = new Queue();\n    queue.push(this.root);\n    let delay = 150;\n\n    while (!queue.empty()) {\n      let node = queue.front();\n\n      if (node) {\n        queue.push(node.left);\n        queue.push(node.right);\n\n        for (let key in node.animations['initial']) {\n          node.animations['initial'][key]['active'] = true;\n          node.animations['initial'][key]['delay'] = delay;\n        }\n\n        delay += 200;\n      }\n    }\n  }\n\n  setHideAnimations(node = this.root) {\n    if (node === null) return;\n\n    for (let state in node.animations) {\n      for (let element in node.animations[state]) {\n        node.animations[state][element]['active'] = false;\n        node.animations[state][element]['delay'] = 150;\n      }\n    }\n\n    this.setHideAnimations(node.left);\n    this.setHideAnimations(node.right);\n  }\n\n  setHideTraversalAnimations(node = this.root) {\n    if (node === null) return;\n\n    for (let state in node.animations) {\n      for (let element in node.animations[state]) {\n        if (state === 'initial') {\n          node.animations[state][element]['active'] = true;\n        } else {\n          node.animations[state][element]['active'] = false;\n        }\n\n        node.animations[state][element]['delay'] = 150;\n      }\n    }\n\n    this.setHideTraversalAnimations(node.left);\n    this.setHideTraversalAnimations(node.right);\n  }\n\n  setHideMoveAnimations(node = this.root) {\n    if (node === null) return;\n    node.moveAnimations['active'] = false;\n    node.moveAnimations['delay'] = 0;\n    this.setHideMoveAnimations(node.left);\n    this.setHideMoveAnimations(node.right);\n  }\n\n  setDFSTraversalAnimations(order, node = this.root, delay = 150) {\n    if (node === null) return delay;\n\n    let _delay = node === this.root ? delay : delay + 1000;\n\n    node.animations['visited']['node']['active'] = true;\n    node.animations['visited']['node']['delay'] = _delay + 500;\n    node.animations['visited']['line']['active'] = true;\n    node.animations['visited']['line']['delay'] = _delay;\n\n    if (order === 'Pre-order') {\n      _delay += 1000;\n      node.animations['success']['node']['active'] = true;\n      node.animations['success']['node']['delay'] = _delay;\n    }\n\n    _delay = this.setDFSTraversalAnimations(order, node.left, _delay);\n\n    if (order === 'In-order') {\n      _delay += 1000;\n      node.animations['success']['node']['active'] = true;\n      node.animations['success']['node']['delay'] = _delay;\n    }\n\n    _delay = this.setDFSTraversalAnimations(order, node.right, _delay);\n\n    if (order === 'Post-order') {\n      _delay += 1000;\n      node.animations['success']['node']['active'] = true;\n      node.animations['success']['node']['delay'] = _delay;\n    }\n\n    node.animations['success']['line']['active'] = true;\n    node.animations['success']['line']['delay'] = _delay;\n    return _delay;\n  }\n\n  setBFSTraversalAnimations() {\n    let queue = new Queue();\n    let delay = 150;\n\n    if (this.root) {\n      queue.push(this.root);\n      this.root.animations['visited']['node']['active'] = true;\n      this.root.animations['visited']['node']['delay'] = delay;\n    } else {//error..tree is empty\n    }\n\n    while (!queue.empty()) {\n      let node = queue.front();\n\n      if (node) {\n        if (node.left) {\n          queue.push(node.left);\n          delay += 1000;\n\n          for (let element in node.left.animations['visited']) {\n            node.left.animations['visited'][element]['active'] = true;\n            node.left.animations['visited'][element]['delay'] = delay;\n          }\n        }\n\n        if (node.right) {\n          queue.push(node.right);\n          delay += 1000;\n\n          for (let element in node.right.animations['visited']) {\n            node.right.animations['visited'][element]['active'] = true;\n            node.right.animations['visited'][element]['delay'] = delay;\n          }\n        }\n\n        delay += 1000;\n\n        for (let element in node.animations['success']) {\n          node.animations['success'][element]['active'] = true;\n          node.animations['success'][element]['delay'] = delay;\n        }\n      }\n    }\n  }\n\n  setSearchAnimations(node = this.root, delay = 150) {\n    if (!this.targetValue) return;\n\n    if (node === null) {\n      if (node === this.root) {//show error..empty tree\n      }\n    } else {\n      if (this.targetValue === node.value) {\n        node.animations['success']['node']['active'] = true;\n        node.animations['success']['node']['delay'] = delay + 1250;\n      } else if (this.targetValue < node.value) this.setSearchAnimations(node.left, delay + 1000);else this.setSearchAnimations(node.right, delay + 1000);\n\n      node.animations['visited']['node']['active'] = true;\n      node.animations['visited']['node']['delay'] = delay + 500;\n      node.animations['visited']['line']['active'] = true;\n      node.animations['visited']['line']['delay'] = delay;\n    }\n  }\n\n  setInsertAnimations(node = this.root, delay = 150) {\n    if (!this.targetValue || !node) return;else {\n      if (this.targetValue === node.value) {\n        this.targetNode = node;\n        return;\n      } else if (this.targetValue < node.value) this.setInsertAnimations(node.left, delay + 1000);else this.setInsertAnimations(node.right, delay + 1000);\n\n      node.animations['visited']['node']['active'] = true;\n      node.animations['visited']['node']['delay'] = delay + 500;\n      node.animations['visited']['line']['active'] = true;\n      node.animations['visited']['line']['delay'] = delay;\n    }\n  }\n\n  setInsertionCompleteAnimations() {\n    let node = this.targetNode;\n\n    if (node) {\n      node.animations['initial']['node']['active'] = true;\n      node.animations['initial']['node']['delay'] = 650;\n      node.animations['initial']['line']['active'] = true;\n      node.animations['initial']['line']['delay'] = 150;\n      node.animations['success']['node']['active'] = true;\n      node.animations['success']['node']['delay'] = 1250;\n    }\n  }\n\n  setRemoveAnimations(node = this.targetNode, delay = 150) {\n    if (!this.targetValue) return;\n\n    if (node === null) {\n      if (node === this.root) {//show error..empty tree\n      }\n    } else {\n      node.animations['visited']['node']['active'] = true;\n      node.animations['visited']['node']['delay'] = delay + 500;\n      node.animations['visited']['line']['active'] = true;\n      node.animations['visited']['line']['delay'] = delay;\n\n      if (this.targetValue === node.value) {\n        node.animations['removed']['node']['active'] = true;\n        node.animations['removed']['node']['delay'] = delay + 1500;\n        node.animations['removed']['line']['active'] = true;\n        node.animations['removed']['line']['delay'] = delay + 1000;\n        node.animations['initial']['node']['active'] = false;\n        node.animations['initial']['node']['delay'] = delay + 1500;\n        node.animations['initial']['line']['active'] = false;\n        node.animations['initial']['line']['delay'] = delay + 1500;\n        this.targetNode = node;\n      } else if (this.targetValue < node.value) this.setRemoveAnimations(node.left, delay + 1000);else this.setRemoveAnimations(node.right, delay + 1000);\n    }\n  }\n\n  setMoveSubtreeAnimations() {\n    let node = this.targetNode;\n\n    if (node) {\n      if (node.left === null || node.right === null) {\n        node.animations['initial']['line']['active'] = true;\n        node.animations['initial']['line']['delay'] = 3000;\n        node.animations['visited']['node']['active'] = false;\n        node.animations['visited']['node']['delay'] = 150;\n        node.animations['visited']['line']['active'] = false;\n        node.animations['visited']['line']['delay'] = 150;\n        node.animations['removed']['node']['active'] = false;\n        node.animations['removed']['node']['delay'] = 150;\n        node.animations['removed']['line']['active'] = false;\n        node.animations['removed']['line']['delay'] = 150;\n        node.animations['success']['line']['active'] = true;\n        node.animations['success']['line']['delay'] = 3500;\n\n        if (node.left === null && node.right === null) {\n          node.animations['initial']['line']['active'] = false;\n          node.animations['initial']['line']['delay'] = 0;\n          node.animations['success']['line']['active'] = false;\n          node.animations['success']['line']['delay'] = 0;\n        } else if (node.left === null) {\n          node.right.animations['initial']['line']['active'] = false;\n          node.right.animations['initial']['line']['delay'] = 150;\n          node.right.moveAnimations['active'] = true;\n          node.right.moveAnimations['delay'] = 1000;\n          node.right.moveAnimations['css']['entered'] = {\n            'width': '100%',\n            'z-index': '1000',\n            'transform': 'translate(-50%, -50px)'\n          };\n          this.setMoveSubtreeCompleteAnimations(node.right);\n        } else if (node.right === null) {\n          node.left.animations['initial']['line']['active'] = false;\n          node.left.animations['initial']['line']['delay'] = 150;\n          node.left.moveAnimations['active'] = true;\n          node.left.moveAnimations['delay'] = 1000;\n          node.left.moveAnimations['css']['entered'] = {\n            'width': '100%',\n            'z-index': '1000',\n            'transform': 'translate(0, -50px)'\n          };\n          this.setMoveSubtreeCompleteAnimations(node.left);\n        }\n      } else {\n        let delay = this.setInOrderSuccessorAnimations(node.right); //node.right.animations['initial']['line']['active'] = false;\n        //node.right.animations['initial']['line']['delay'] = delay;\n        //node.left.animations['initial']['line']['active'] = false;\n        //node.left.animations['initial']['line']['delay'] = delay;\n        //node.animations['success']['line']['active'] = true;\n        //node.animations['success']['line']['delay'] = delay;\n      }\n    }\n  }\n\n  setMoveSubtreeCompleteAnimations(node, delay = 4000, first = true) {\n    if (node) {\n      if (first) {\n        node.animations['success']['node']['active'] = true;\n        node.animations['success']['node']['delay'] = delay;\n      } else {\n        node.animations['success']['node']['active'] = true;\n        node.animations['success']['node']['delay'] = delay;\n        node.animations['success']['line']['active'] = true;\n        node.animations['success']['line']['delay'] = delay;\n      }\n\n      this.setMoveSubtreeCompleteAnimations(node.left, delay + 300, false);\n      this.setMoveSubtreeCompleteAnimations(node.right, delay + 300, false);\n    }\n  }\n\n  setInOrderSuccessorAnimations(node, delay = 150) {\n    node.animations['visited']['node']['active'] = true;\n    node.animations['visited']['node']['delay'] = delay + 500;\n    node.animations['visited']['line']['active'] = true;\n    node.animations['visited']['line']['delay'] = delay;\n\n    if (node.left) {\n      return this.setInOrderSuccessorAnimations(node.left, delay + 1000);\n    } else {\n      this.targetValue = node.value;\n      node.animations['success']['node']['active'] = true;\n      node.animations['success']['node']['delay'] = delay + 1500;\n      node.animations['success']['line']['active'] = true;\n      node.animations['success']['line']['delay'] = delay + 1000;\n      return delay + 1500;\n    }\n  }\n  /*remove(val, node = this.root) {\r\n      if ( node === null ) return node;\r\n        if ( val < node.value ) {\r\n          node.left = this.remove(val, node.left);\r\n      }\r\n      else if ( val > node.value ) {\r\n          node.right = this.remove(val, node.right);\r\n      }\r\n      else {\r\n          if ( node.left === null ) {\r\n              return node.right;\r\n          }\r\n          else if ( node.right === null ) {\r\n              return node.left;\r\n          }\r\n          else {\r\n              node.value = this.inOrderSuccessor(node.right);\r\n              node.right = this.remove(node.value, node.right);\r\n          }\r\n      }\r\n        return node;\r\n  }\r\n    inOrderSuccessor(node) {\r\n      if ( node === null ) {\r\n          return node;\r\n      }\r\n      else if ( node.left !== null ) {\r\n          return this.inOrderSuccessor(node.left);\r\n      }\r\n      else {\r\n          return node.value;\r\n      }\r\n  }*/\n\n\n  action1() {\n    this.reset();\n    this.insertNumElements(15);\n    this.setGenerationAnimations();\n    this.setState({\n      initial: true\n    });\n  }\n\n  action2() {\n    this.removeValue = null;\n    this.targetValue = null;\n    this.targetNode = null;\n    this.setHideAnimations();\n    this.setState({\n      initial: true\n    });\n  }\n\n  action3() {\n    this.removeValue = null;\n    this.targetValue = null;\n    this.targetNode = null;\n    this.setHideTraversalAnimations();\n    this.setState({\n      initial: true\n    });\n  }\n\n  action4() {\n    this.setDFSTraversalAnimations('In-order'); //this.setBFSTraversalAnimations();\n\n    this.setState({\n      initial: true\n    });\n  }\n\n  action5(val) {\n    this.targetValue = val;\n    this.setSearchAnimations();\n    this.setState({\n      initial: true\n    });\n  }\n\n  action6() {\n    //check if tree has element first..\n    this.targetValue = parseInt(prompt());\n    this.insert(this.targetValue);\n    this.setInsertAnimations();\n    this.setState({\n      initial: true\n    });\n  }\n\n  action7() {\n    this.setInsertionCompleteAnimations();\n    this.setState({\n      initial: true\n    });\n  }\n\n  action8(val) {\n    //check if tree has element first..\n    this.removeValue = val;\n    this.targetValue = val;\n    this.targetNode = this.root;\n    this.action9();\n  }\n\n  action9() {\n    this.setRemoveAnimations();\n    this.setState({\n      initial: true\n    });\n  }\n\n  action10() {\n    this.setMoveSubtreeAnimations();\n    this.setState({\n      initial: true\n    });\n  }\n\n  action11() {}\n\n  action12() {\n    this.setHideMoveAnimations();\n    this.setState({\n      initial: true\n    });\n  }\n\n  action13() {\n    this.remove(this.removeValue);\n    this.setHideMoveAnimations();\n    this.setHideTraversalAnimations();\n    this.setState({\n      initial: true\n    });\n  }\n\n  action14() {\n    this.reset();\n  }\n\n  render() {\n    console.log(\"BST::render: \");\n    console.log(this.state);\n    return React.createElement(React.Fragment, null, React.createElement(\"button\", {\n      onClick: this.action1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 949\n      },\n      __self: this\n    }, \"Generate new tree\"), React.createElement(\"button\", {\n      onClick: this.action2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 950\n      },\n      __self: this\n    }, \"Hide Tree\"), React.createElement(\"button\", {\n      onClick: this.action3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 951\n      },\n      __self: this\n    }, \"Hide traversals\"), React.createElement(\"button\", {\n      onClick: this.action4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 952\n      },\n      __self: this\n    }, \"Traversals\"), React.createElement(\"button\", {\n      onClick: this.action5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 953\n      },\n      __self: this\n    }, \"Search\"), React.createElement(\"button\", {\n      onClick: this.action6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 954\n      },\n      __self: this\n    }, \"Insert\"), React.createElement(\"button\", {\n      onClick: this.action7,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 955\n      },\n      __self: this\n    }, \"Insert complete\"), React.createElement(\"button\", {\n      onClick: this.action8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 956\n      },\n      __self: this\n    }, \"Pre-Remove (call once)\"), React.createElement(\"button\", {\n      onClick: this.action9,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 957\n      },\n      __self: this\n    }, \"Remove step 1\"), React.createElement(\"button\", {\n      onClick: this.action10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 958\n      },\n      __self: this\n    }, \"Remove step 2\"), React.createElement(\"button\", {\n      onClick: this.action11,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 959\n      },\n      __self: this\n    }, \"n/a\"), React.createElement(\"button\", {\n      onClick: this.action12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 960\n      },\n      __self: this\n    }, \"Hide moves\"), React.createElement(\"button\", {\n      onClick: this.action13,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 961\n      },\n      __self: this\n    }, \"Remove final\"), React.createElement(\"button\", {\n      onClick: this.action14,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 962\n      },\n      __self: this\n    }, \"Reset\"), false ? React.createElement(InputModal, {\n      operation: this.state.operation,\n      callback: this.receiveInput,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 964\n      },\n      __self: this\n    }) : null, false ? React.createElement(ErrorMessage, {\n      message: \"Error: Tree is empty\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 965\n      },\n      __self: this\n    }) : null, React.createElement(\"div\", {\n      id: this.name,\n      className: \"tree\",\n      style: {\n        transform: this.getScaleFactor()\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 967\n      },\n      __self: this\n    }, this.Tree()));\n  }\n  /*shouldComponentUpdate(nextProps, nextState) {\r\n      console.log(\"BST::shouldComponentUpdate: \" + nextState.operation);\r\n      if ( nextState.operation === this.initialStateOperation ) {\r\n          return false;\r\n      }\r\n      else {\r\n          return true;\r\n      }\r\n  }*/\n\n  /*componentDidUpdate() {\r\n      console.log(\"BST::componentDidUpdate: \" + this.state.operation);\r\n      if ( this.state.operation !== this.initialStateOperation ) {\r\n          this.setState({ operation: this.initialStateOperation });\r\n      }\r\n  }*/\n\n\n}","map":{"version":3,"sources":["C:/Users/Jonathan Kelaty/Desktop/TreeVisualizer/tree-visualizer/src/TreeVisualizer/Trees/BinarySearchTree/BinarySearchTree.jsx"],"names":["React","Transition","CSSTransition","InputModal","ErrorMessage","Queue","randomIntFromInverval","BinarySearchTreeNode","constructor","val","value","left","right","animations","initial","node","active","delay","line","visited","success","removed","moveAnimations","css","entering","entered","exiting","exited","BinarySearchTree","Component","props","initialStateOperation","visibleClasses","appearDone","enterDone","exit","moveClasses","exitActive","name","key","root","removeValue","targetValue","targetNode","state","receiveInput","bind","action1","action2","action3","action4","action5","action6","action7","action8","action9","action10","action11","action12","action13","action14","componentDidMount","insertNumElements","elements","i","insert","height","remove","reset","Math","max","curr","inOrderSuccessor","getScaleFactor","scale_factor","window","innerWidth","pow","alert","searchNode","deleteNode","Tree","tree_height","curr_height","pos","leftChild","rightChild","classes","join","rootWidth","width","getNodeHover","getCricle","getConnectingLine","getLine","addClass","setGenerationAnimations","queue","push","empty","front","setHideAnimations","element","setHideTraversalAnimations","setHideMoveAnimations","setDFSTraversalAnimations","order","_delay","setBFSTraversalAnimations","setSearchAnimations","setInsertAnimations","setInsertionCompleteAnimations","setRemoveAnimations","setMoveSubtreeAnimations","setMoveSubtreeCompleteAnimations","setInOrderSuccessorAnimations","first","setState","parseInt","prompt","render","console","log","operation","transform"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,UAAR,EAAoBC,aAApB,QAAyC,wBAAzC;AAEA,OAAOC,UAAP,MAAuB,4CAAvB;AACA,OAAOC,YAAP,MAAyB,gDAAzB;AAEA,OAAOC,KAAP,MAAkB,2BAAlB;AACA,SAASC,qBAAT,QAAsC,6BAAtC;AAEA,OAAO,yBAAP;;AAEA,MAAMC,oBAAN,CAA2B;AACvBC,EAAAA,WAAW,CAACC,GAAD,EAAM;AACb,SAAKC,KAAL,GAAaD,GAAb;AACA,SAAKE,IAAL,GAAa,IAAb;AACA,SAAKC,KAAL,GAAa,IAAb;AAEA,SAAKC,UAAL,GAAkB;AACdC,MAAAA,OAAO,EAAE;AACLC,QAAAA,IAAI,EAAE;AACFC,UAAAA,MAAM,EAAE,KADN;AACaC,UAAAA,KAAK,EAAE;AADpB,SADD;AAILC,QAAAA,IAAI,EAAE;AACFF,UAAAA,MAAM,EAAE,KADN;AACcC,UAAAA,KAAK,EAAE;AADrB;AAJD,OADK;AASdE,MAAAA,OAAO,EAAE;AACLJ,QAAAA,IAAI,EAAE;AACFC,UAAAA,MAAM,EAAE,KADN;AACaC,UAAAA,KAAK,EAAE;AADpB,SADD;AAILC,QAAAA,IAAI,EAAE;AACFF,UAAAA,MAAM,EAAE,KADN;AACcC,UAAAA,KAAK,EAAE;AADrB;AAJD,OATK;AAiBdG,MAAAA,OAAO,EAAE;AACLL,QAAAA,IAAI,EAAE;AACFC,UAAAA,MAAM,EAAE,KADN;AACaC,UAAAA,KAAK,EAAE;AADpB,SADD;AAILC,QAAAA,IAAI,EAAE;AACFF,UAAAA,MAAM,EAAE,KADN;AACcC,UAAAA,KAAK,EAAE;AADrB;AAJD,OAjBK;AAyBdI,MAAAA,OAAO,EAAE;AACLN,QAAAA,IAAI,EAAE;AACFC,UAAAA,MAAM,EAAE,KADN;AACaC,UAAAA,KAAK,EAAE;AADpB,SADD;AAILC,QAAAA,IAAI,EAAE;AACFF,UAAAA,MAAM,EAAE,KADN;AACcC,UAAAA,KAAK,EAAE;AADrB;AAJD;AAzBK,KAAlB;AAmCA,SAAKK,cAAL,GAAsB;AAClBN,MAAAA,MAAM,EAAE,KADU;AAElBC,MAAAA,KAAK,EAAE,CAFW;AAGlBM,MAAAA,GAAG,EAAE;AACDC,QAAAA,QAAQ,EAAE,EADT;AAEDC,QAAAA,OAAO,EAAG,EAFT;AAGDC,QAAAA,OAAO,EAAG,EAHT;AAIDC,QAAAA,MAAM,EAAI;AAJT;AAHa,KAAtB;AAUH;;AAnDsB;;AAsD3B,eAAe,MAAMC,gBAAN,SAA+B5B,KAAK,CAAC6B,SAArC,CAA+C;AAC1DrB,EAAAA,WAAW,CAACsB,KAAD,EAAQ;AACf,UAAMA,KAAN;AAEA,SAAKC,qBAAL,GAA6B,SAA7B;AAEA,SAAKC,cAAL,GAAsB;AAClBC,MAAAA,UAAU,EAAE,SADM;AAElBC,MAAAA,SAAS,EAAE,SAFO;AAGlBC,MAAAA,IAAI,EAAE;AAHY,KAAtB;AAMA,SAAKC,WAAL,GAAmB;AACfH,MAAAA,UAAU,EAAE,MADG;AAEfC,MAAAA,SAAS,EAAE,MAFI;AAGfC,MAAAA,IAAI,EAAE,OAHS;AAIfE,MAAAA,UAAU,EAAE;AAJG,KAAnB;AAOA,SAAKC,IAAL,GAAY,kBAAZ;AACA,SAAKC,GAAL,GAAY,KAAZ;AACA,SAAKC,IAAL,GAAY,IAAZ;AAEA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AAEA,SAAKC,KAAL,GAAa;AACT9B,MAAAA,OAAO,EAAE;AADA,KAAb;AAIA,SAAK+B,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AAEA,SAAKC,OAAL,GAAe,KAAKA,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAf,CAhCe,CAgCyB;;AACxC,SAAKE,OAAL,GAAe,KAAKA,OAAL,CAAaF,IAAb,CAAkB,IAAlB,CAAf,CAjCe,CAiCyB;;AACxC,SAAKG,OAAL,GAAe,KAAKA,OAAL,CAAaH,IAAb,CAAkB,IAAlB,CAAf,CAlCe,CAkCyB;;AACxC,SAAKI,OAAL,GAAe,KAAKA,OAAL,CAAaJ,IAAb,CAAkB,IAAlB,CAAf,CAnCe,CAmCyB;;AACxC,SAAKK,OAAL,GAAe,KAAKA,OAAL,CAAaL,IAAb,CAAkB,IAAlB,CAAf,CApCe,CAoCyB;;AACxC,SAAKM,OAAL,GAAe,KAAKA,OAAL,CAAaN,IAAb,CAAkB,IAAlB,CAAf,CArCe,CAqCyB;;AACxC,SAAKO,OAAL,GAAe,KAAKA,OAAL,CAAaP,IAAb,CAAkB,IAAlB,CAAf,CAtCe,CAsCyB;;AACxC,SAAKQ,OAAL,GAAe,KAAKA,OAAL,CAAaR,IAAb,CAAkB,IAAlB,CAAf,CAvCe,CAuCyB;;AACxC,SAAKS,OAAL,GAAe,KAAKA,OAAL,CAAaT,IAAb,CAAkB,IAAlB,CAAf,CAxCe,CAwCyB;;AACxC,SAAKU,QAAL,GAAgB,KAAKA,QAAL,CAAcV,IAAd,CAAmB,IAAnB,CAAhB,CAzCe,CAyC2B;;AAC1C,SAAKW,QAAL,GAAgB,KAAKA,QAAL,CAAcX,IAAd,CAAmB,IAAnB,CAAhB,CA1Ce,CA0C2B;;AAC1C,SAAKY,QAAL,GAAgB,KAAKA,QAAL,CAAcZ,IAAd,CAAmB,IAAnB,CAAhB,CA3Ce,CA2C2B;;AAC1C,SAAKa,QAAL,GAAgB,KAAKA,QAAL,CAAcb,IAAd,CAAmB,IAAnB,CAAhB,CA5Ce,CA4C2B;;AAC1C,SAAKc,QAAL,GAAgB,KAAKA,QAAL,CAAcd,IAAd,CAAmB,IAAnB,CAAhB,CA7Ce,CA6C2B;AAC7C;;AAEDe,EAAAA,iBAAiB,GAAG,CAEnB,CAFgB,CACb;;AAGJ;;;;;;;;;;;;;;;;;;;;;;;AAwBAC,EAAAA,iBAAiB,CAACC,QAAD,EAAW;AACxB,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,QAApB,EAA8B,EAAEC,CAAhC,EAAmC;AAC/B,UAAIvD,GAAG,GAAGH,qBAAqB,CAAC,CAAD,EAAI,GAAJ,CAA/B;;AACA,UAAK,KAAK2D,MAAL,CAAaxD,GAAb,CAAL,EAA0B;AACtB,YAAK,KAAKyD,MAAL,KAAgB,CAArB,EAAyB;AACrB,eAAK1B,IAAL,GAAY,KAAK2B,MAAL,CAAa1D,GAAb,CAAZ;AACA,YAAEuD,CAAF;AACH;AACJ,OALD,MAMK;AACD,UAAEA,CAAF;AACH;AACJ;AACJ;;AAEDI,EAAAA,KAAK,GAAG;AACJ,SAAK5B,IAAL,GAAY,IAAZ;AACH;;AAED0B,EAAAA,MAAM,CAACnD,IAAI,GAAG,KAAKyB,IAAb,EAAmB;AACrB,QAAIzB,IAAI,KAAK,IAAb,EAAmB,OAAO,CAAP;AACnB,WAAOsD,IAAI,CAACC,GAAL,CAAU,KAAKJ,MAAL,CAAYnD,IAAI,CAACJ,IAAjB,CAAV,EAAkC,KAAKuD,MAAL,CAAYnD,IAAI,CAACH,KAAjB,CAAlC,IAA8D,CAArE;AACH;;AAEDqD,EAAAA,MAAM,CAACxD,GAAD,EAAM;AACR,QAAI,KAAK+B,IAAL,KAAc,IAAlB,EAAwB;AACpB,WAAKA,IAAL,GAAY,IAAIjC,oBAAJ,CAAyBE,GAAzB,CAAZ;AACA,aAAO,IAAP;AACH;;AAED,QAAI8D,IAAI,GAAG,KAAK/B,IAAhB;;AAEA,WAAO,IAAP,EAAa;AACT,UAAI+B,IAAI,CAAC7D,KAAL,KAAeD,GAAnB,EAAwB;AACpB;AACA,eAAO,KAAP;AACH,OAHD,MAIK,IAAI8D,IAAI,CAAC7D,KAAL,GAAaD,GAAjB,EAAsB;AACvB,YAAG8D,IAAI,CAAC3D,KAAL,KAAe,IAAlB,EAAwB;AACpB2D,UAAAA,IAAI,CAAC3D,KAAL,GAAa,IAAIL,oBAAJ,CAAyBE,GAAzB,CAAb;AACA,iBAAO,IAAP;AACH;;AACD8D,QAAAA,IAAI,GAAGA,IAAI,CAAC3D,KAAZ;AACH,OANI,MAOA;AACD,YAAG2D,IAAI,CAAC5D,IAAL,KAAc,IAAjB,EAAuB;AACnB4D,UAAAA,IAAI,CAAC5D,IAAL,GAAY,IAAIJ,oBAAJ,CAAyBE,GAAzB,CAAZ;AACA,iBAAO,IAAP;AACH;;AACD8D,QAAAA,IAAI,GAAGA,IAAI,CAAC5D,IAAZ;AACH;AACJ;AACJ;;AAEDwD,EAAAA,MAAM,CAAC1D,GAAD,EAAMM,IAAI,GAAG,KAAKyB,IAAlB,EAAwB;AAC1B,QAAK,CAAE/B,GAAP,EAAa;AAEb,QAAKM,IAAI,KAAK,IAAd,EAAqB,OAAOA,IAAP;;AAErB,QAAKN,GAAG,GAAGM,IAAI,CAACL,KAAhB,EAAwB;AACpBK,MAAAA,IAAI,CAACJ,IAAL,GAAY,KAAKwD,MAAL,CAAY1D,GAAZ,EAAiBM,IAAI,CAACJ,IAAtB,CAAZ;AACH,KAFD,MAGK,IAAKF,GAAG,GAAGM,IAAI,CAACL,KAAhB,EAAwB;AACzBK,MAAAA,IAAI,CAACH,KAAL,GAAa,KAAKuD,MAAL,CAAY1D,GAAZ,EAAiBM,IAAI,CAACH,KAAtB,CAAb;AACH,KAFI,MAGA;AACD,UAAKG,IAAI,CAACJ,IAAL,KAAc,IAAnB,EAA0B;AACtB,eAAOI,IAAI,CAACH,KAAZ;AACH,OAFD,MAGK,IAAKG,IAAI,CAACH,KAAL,KAAe,IAApB,EAA2B;AAC5B,eAAOG,IAAI,CAACJ,IAAZ;AACH,OAFI,MAGA;AACDI,QAAAA,IAAI,CAACL,KAAL,GAAa,KAAK8D,gBAAL,CAAsBzD,IAAI,CAACH,KAA3B,CAAb;AACAG,QAAAA,IAAI,CAACH,KAAL,GAAa,KAAKuD,MAAL,CAAYpD,IAAI,CAACL,KAAjB,EAAwBK,IAAI,CAACH,KAA7B,CAAb;AACH;AACJ;;AAED,WAAOG,IAAP;AACH;;AAEDyD,EAAAA,gBAAgB,CAACzD,IAAD,EAAO;AACnB,QAAKA,IAAI,KAAK,IAAd,EAAqB,CACjB;AACH,KAFD,MAGK,IAAKA,IAAI,CAACJ,IAAL,KAAc,IAAnB,EAA0B;AAC3B,aAAO,KAAK6D,gBAAL,CAAsBzD,IAAI,CAACJ,IAA3B,CAAP;AACH,KAFI,MAGA;AACD,aAAOI,IAAI,CAACL,KAAZ;AACH;AACJ;;AAED+D,EAAAA,cAAc,GAAG;AACb,QAAIC,YAAY,GAAG,CAACC,MAAM,CAACC,UAAP,GAAoB,EAArB,KAA6BP,IAAI,CAACQ,GAAL,CAAS,CAAT,EAAY,KAAKX,MAAL,KAAgB,CAA5B,IAAiC,EAA9D,CAAnB;AACA,WAAO,YAAYQ,YAAY,GAAG,CAAf,GAAmB,CAAnB,GAAuBA,YAAnC,IAAmD,GAA1D;AACH;;AAED7B,EAAAA,YAAY,CAACpC,GAAD,EAAM;AACdqE,IAAAA,KAAK,CAACrE,GAAD,CAAL;AACH;;AAEDsE,EAAAA,UAAU,CAACtE,GAAD,EAAM;AACZ,SAAK0C,OAAL,CAAa1C,GAAb;AACH;;AAEDuE,EAAAA,UAAU,CAACvE,GAAD,EAAM;AACZ,SAAK6C,OAAL,CAAa7C,GAAb;AACH;;AAEDwE,EAAAA,IAAI,CAAClE,IAAI,GAAG,KAAKyB,IAAb,EAAmB0C,WAAW,GAAG,KAAKhB,MAAL,EAAjC,EAAgDiB,WAAW,GAAG,CAA9D,EAAiEC,GAAG,GAAG,MAAvE,EAA+E;AAC/E,QAAID,WAAW,KAAKD,WAApB,EAAiC,OAAO,IAAP;AAEjC,UAAMG,SAAS,GAAI,KAAKJ,IAAL,CAAUlE,IAAI,GAAGA,IAAI,CAACJ,IAAR,GAAgB,IAA9B,EAAoCuE,WAApC,EAAiDC,WAAW,GAAG,CAA/D,EAAkE,MAAlE,CAAnB;AACA,UAAMG,UAAU,GAAG,KAAKL,IAAL,CAAUlE,IAAI,GAAGA,IAAI,CAACH,KAAR,GAAgB,IAA9B,EAAoCsE,WAApC,EAAiDC,WAAW,GAAG,CAA/D,EAAkE,OAAlE,CAAnB;AAEA,UAAMI,OAAO,GAAG,CAAC,cAAD,EAAiBH,GAAjB,EAAsBI,IAAtB,CAA2B,GAA3B,CAAhB;;AAEA,QAAKzE,IAAI,KAAK,IAAd,EAAqB;AACjB,aACI,0CACI;AACI,QAAA,SAAS,EAAEwE,OADf;AAEI,sBAAW,MAFf;AAGI,sBAAYL,WAAW,GAAGC,WAH9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKQ;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALR,EAOSE,SAPT,EAQSC,UART,CADJ,CADJ;AAcH,KAfD,MAgBK;AACD,YAAMG,SAAS,GAAG;AACdC,QAAAA,KAAK,EAAI3E,IAAI,KAAK,KAAKyB,IAAhB,GAAyB6B,IAAI,CAACQ,GAAL,CAAS,CAAT,EAAYK,WAAW,GAAG,CAA1B,IAA+B,EAA/B,GAAoC,IAA7D,GAAoE;AAD7D,OAAlB;AAIA,aACI,0CACI,oBAAC,UAAD;AACI,QAAA,EAAE,EAAEnE,IAAI,CAACO,cAAL,CAAoB,QAApB,CADR;AAEI,QAAA,OAAO,EAAEP,IAAI,CAACO,cAAL,CAAoB,OAApB,CAFb;AAGI,QAAA,MAAM,EAAE,IAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKKsB,KAAK,IAEF;AACI,QAAA,SAAS,EAAE2C,OADf;AAEI,sBAAYxE,IAAI,CAACL,KAFrB;AAGI,sBAAYwE,WAAW,GAAGC,WAH9B;AAII,QAAA,KAAK,EAAIpE,IAAI,KAAK,KAAKyB,IAAhB,GAAyBiD,SAAzB,GAAqC1E,IAAI,CAACO,cAAL,CAAoB,KAApB,EAA2BsB,KAA3B,CAJhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMI,oBAAC,aAAD;AACI,QAAA,EAAE,EAAE7B,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,CADR;AAEI,QAAA,OAAO,EAAEE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,CAFb;AAGI,QAAA,UAAU,EAAE,KAAKmB,cAHrB;AAII,QAAA,MAAM,EAAE,IAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMI;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,KAAK2D,YAAL,CAAkB5E,IAAI,CAACL,KAAvB,CADL,EAEK,KAAKkF,SAAL,CAAe7E,IAAf,CAFL,CANJ,CANJ,EAmBKsE,SAnBL,EAoBKC,UApBL,EAsBK,KAAKO,iBAAL,CAAuB9E,IAAvB,EAA6BqE,GAA7B,CAtBL,CAPR,CADJ,CADJ;AAuCH;AACJ;;AAEDQ,EAAAA,SAAS,CAAC7E,IAAD,EAAO;AACZ,WACI,0CACI;AAAK,MAAA,SAAS,EAAC,0BAAf;AAA0C,MAAA,KAAK,EAAC,4BAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AAAQ,MAAA,SAAS,EAAC,4BAAlB;AAA+C,MAAA,CAAC,EAAC,IAAjD;AAAsD,MAAA,EAAE,EAAC,IAAzD;AAA8D,MAAA,EAAE,EAAC,IAAjE;AAAsE,MAAA,IAAI,EAAC,MAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAII,oBAAC,aAAD;AACI,MAAA,EAAE,EAAEA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,CADR;AAEI,MAAA,OAAO,EAAEE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,CAFb;AAGI,MAAA,UAAU,EAAE,KAAKmB,cAHrB;AAII,MAAA,MAAM,EAAE,IAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMI;AAAK,MAAA,SAAS,EAAC,8BAAf;AAA8C,MAAA,KAAK,EAAC,4BAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,SAAS,EAAC,uCAAlB;AAA0D,MAAA,CAAC,EAAC,IAA5D;AAAiE,MAAA,EAAE,EAAC,IAApE;AAAyE,MAAA,EAAE,EAAC,IAA5E;AAAiF,MAAA,IAAI,EAAC,MAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAQ,MAAA,SAAS,EAAC,4BAAlB;AAA+C,MAAA,CAAC,EAAC,IAAjD;AAAsD,MAAA,EAAE,EAAC,IAAzD;AAA8D,MAAA,EAAE,EAAC,IAAjE;AAAsE,MAAA,IAAI,EAAC,MAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CANJ,CAJJ,EAiBI,oBAAC,aAAD;AACI,MAAA,EAAE,EAAEjB,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,CADR;AAEI,MAAA,OAAO,EAAEE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,CAFb;AAGI,MAAA,UAAU,EAAE,KAAKmB,cAHrB;AAII,MAAA,MAAM,EAAE,IAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMI;AAAK,MAAA,SAAS,EAAC,8BAAf;AAA8C,MAAA,KAAK,EAAC,4BAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,SAAS,EAAC,uCAAlB;AAA0D,MAAA,CAAC,EAAC,IAA5D;AAAiE,MAAA,EAAE,EAAC,IAApE;AAAyE,MAAA,EAAE,EAAC,IAA5E;AAAiF,MAAA,IAAI,EAAC,MAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAQ,MAAA,SAAS,EAAC,4BAAlB;AAA+C,MAAA,CAAC,EAAC,IAAjD;AAAsD,MAAA,EAAE,EAAC,IAAzD;AAA8D,MAAA,EAAE,EAAC,IAAjE;AAAsE,MAAA,IAAI,EAAC,MAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CANJ,CAjBJ,EA8BI,oBAAC,aAAD;AACI,MAAA,EAAE,EAAEjB,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,CADR;AAEI,MAAA,OAAO,EAAEE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,CAFb;AAGI,MAAA,UAAU,EAAE,KAAKmB,cAHrB;AAII,MAAA,MAAM,EAAE,IAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMI;AAAK,MAAA,SAAS,EAAC,8BAAf;AAA8C,MAAA,KAAK,EAAC,4BAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,SAAS,EAAC,uCAAlB;AAA0D,MAAA,CAAC,EAAC,IAA5D;AAAiE,MAAA,EAAE,EAAC,IAApE;AAAyE,MAAA,EAAE,EAAC,IAA5E;AAAiF,MAAA,IAAI,EAAC,MAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAQ,MAAA,SAAS,EAAC,4BAAlB;AAA+C,MAAA,CAAC,EAAC,IAAjD;AAAsD,MAAA,EAAE,EAAC,IAAzD;AAA8D,MAAA,EAAE,EAAC,IAAjE;AAAsE,MAAA,IAAI,EAAC,MAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,CANJ,CA9BJ,EA2CI;AAAM,MAAA,SAAS,EAAC,sBAAhB;AAAuC,MAAA,CAAC,EAAC,KAAzC;AAA+C,MAAA,CAAC,EAAC,KAAjD;AAAuD,MAAA,IAAI,EAAC,OAA5D;AAAoE,MAAA,UAAU,EAAC,QAA/E;AAAwF,MAAA,gBAAgB,EAAC,SAAzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACKjB,IAAI,CAACL,KADV,CA3CJ,CADJ,CADJ;AAoDH;;AAEDiF,EAAAA,YAAY,CAAClF,GAAD,EAAM;AACd,WACI,0CACI;AAAM,MAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAG,MAAA,SAAS,EAAC,eAAb;AAA6B,MAAA,OAAO,EAAE,MAAM,KAAKsE,UAAL,CAAgBtE,GAAhB,CAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI;AAAM,MAAA,SAAS,EAAC,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAwB,MAAA,KAAK,EAAC,4BAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,SAAS,EAAC,0BAAlB;AAA6C,MAAA,CAAC,EAAC,IAA/C;AAAoD,MAAA,EAAE,EAAC,IAAvD;AAA4D,MAAA,EAAE,EAAC,IAA/D;AAAoE,MAAA,IAAI,EAAC,MAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CAFJ,EAQI;AAAG,MAAA,SAAS,EAAC,cAAb;AAA4B,MAAA,OAAO,EAAE,MAAM,KAAKuE,UAAL,CAAgBvE,GAAhB,CAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MARJ,EASI;AAAM,MAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAwB,MAAA,KAAK,EAAC,4BAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAQ,MAAA,SAAS,EAAC,0BAAlB;AAA6C,MAAA,CAAC,EAAC,IAA/C;AAAoD,MAAA,EAAE,EAAC,IAAvD;AAA4D,MAAA,EAAE,EAAC,IAA/D;AAAoE,MAAA,IAAI,EAAC,MAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CATJ,CADJ,CADJ;AAmBH;;AAEDoF,EAAAA,iBAAiB,CAAC9E,IAAD,EAAOqE,GAAP,EAAY;AACzB,QAAIA,GAAG,KAAK,MAAR,IAAkBA,GAAG,KAAK,OAA9B,EAAuC;AACnC,aACI,0CACI,oBAAC,aAAD;AACI,QAAA,EAAE,EAAErE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,CADR;AAEI,QAAA,OAAO,EAAEE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,CAFb;AAGI,QAAA,UAAU,EAAE,KAAKmB,cAHrB;AAII,QAAA,MAAM,EAAE,IAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMI;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAgC,QAAA,KAAK,EAAC,4BAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEK,KAAK8D,OAAL,CAAaV,GAAb,EAAkB,SAAlB,CAFL,EAII,oBAAC,aAAD;AACI,QAAA,EAAE,EAAErE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,CADR;AAEI,QAAA,OAAO,EAAEE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,CAFb;AAGI,QAAA,UAAU,EAAE,KAAKmB,cAHrB;AAII,QAAA,MAAM,EAAE,IAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMK,KAAK8D,OAAL,CAAaV,GAAb,EAAkB,SAAlB,CANL,CAJJ,EAcI,oBAAC,aAAD;AACI,QAAA,EAAE,EAAErE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,CADR;AAEI,QAAA,OAAO,EAAEE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,CAFb;AAGI,QAAA,UAAU,EAAE,KAAKmB,cAHrB;AAII,QAAA,MAAM,EAAE,IAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMK,KAAK8D,OAAL,CAAaV,GAAb,EAAkB,SAAlB,CANL,CAdJ,EAwBI,oBAAC,aAAD;AACI,QAAA,EAAE,EAAErE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,CADR;AAEI,QAAA,OAAO,EAAEE,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,CAFb;AAGI,QAAA,UAAU,EAAE,KAAKmB,cAHrB;AAII,QAAA,MAAM,EAAE,IAJZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMK,KAAK8D,OAAL,CAAaV,GAAb,EAAkB,SAAlB,CANL,CAxBJ,CANJ,CADJ,CADJ;AA+CH,KAhDD,MAiDK;AACD,aAAO,IAAP;AACH;AACJ;;AAEDU,EAAAA,OAAO,CAACV,GAAD,EAAMW,QAAN,EAAgB;AACnB,UAAMR,OAAO,GAAG,CAAC,MAAD,EAASQ,QAAT,EAAmBP,IAAnB,CAAwB,GAAxB,CAAhB;AAEA,QAAIJ,GAAG,KAAK,MAAZ,EACI,OAAS;AAAM,MAAA,SAAS,EAAEG,OAAjB;AAA0B,MAAA,EAAE,EAAC,GAA7B;AAAiC,MAAA,EAAE,EAAC,IAApC;AAAyC,MAAA,EAAE,EAAC,MAA5C;AAAmD,MAAA,EAAE,EAAC,GAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAT,CADJ,KAEK,IAAIH,GAAG,KAAK,OAAZ,EACD,OAAS;AAAM,MAAA,SAAS,EAAEG,OAAjB;AAA0B,MAAA,EAAE,EAAC,GAA7B;AAAiC,MAAA,EAAE,EAAC,GAApC;AAAwC,MAAA,EAAE,EAAC,MAA3C;AAAkD,MAAA,EAAE,EAAC,IAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAT,CADC,KAGD,OAAO,IAAP;AACP;;AAEDS,EAAAA,uBAAuB,GAAG;AACtB,QAAIC,KAAK,GAAG,IAAI5F,KAAJ,EAAZ;AACA4F,IAAAA,KAAK,CAACC,IAAN,CAAW,KAAK1D,IAAhB;AAEA,QAAIvB,KAAK,GAAG,GAAZ;;AAEA,WAAQ,CAAEgF,KAAK,CAACE,KAAN,EAAV,EAA0B;AACtB,UAAIpF,IAAI,GAAGkF,KAAK,CAACG,KAAN,EAAX;;AAEA,UAAIrF,IAAJ,EAAU;AACNkF,QAAAA,KAAK,CAACC,IAAN,CAAWnF,IAAI,CAACJ,IAAhB;AACAsF,QAAAA,KAAK,CAACC,IAAN,CAAWnF,IAAI,CAACH,KAAhB;;AAEA,aAAK,IAAI2B,GAAT,IAAgBxB,IAAI,CAACF,UAAL,CAAgB,SAAhB,CAAhB,EAA4C;AACxCE,UAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B0B,GAA3B,EAAgC,QAAhC,IAA4C,IAA5C;AACAxB,UAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B0B,GAA3B,EAAgC,OAAhC,IAA2CtB,KAA3C;AACH;;AAEDA,QAAAA,KAAK,IAAI,GAAT;AACH;AACJ;AACJ;;AAEDoF,EAAAA,iBAAiB,CAACtF,IAAI,GAAG,KAAKyB,IAAb,EAAmB;AAChC,QAAIzB,IAAI,KAAK,IAAb,EAAmB;;AAEnB,SAAK,IAAI6B,KAAT,IAAkB7B,IAAI,CAACF,UAAvB,EAAmC;AAC/B,WAAK,IAAIyF,OAAT,IAAoBvF,IAAI,CAACF,UAAL,CAAgB+B,KAAhB,CAApB,EAA4C;AACxC7B,QAAAA,IAAI,CAACF,UAAL,CAAgB+B,KAAhB,EAAuB0D,OAAvB,EAAgC,QAAhC,IAA4C,KAA5C;AACAvF,QAAAA,IAAI,CAACF,UAAL,CAAgB+B,KAAhB,EAAuB0D,OAAvB,EAAgC,OAAhC,IAA2C,GAA3C;AACH;AACJ;;AAED,SAAKD,iBAAL,CAAuBtF,IAAI,CAACJ,IAA5B;AACA,SAAK0F,iBAAL,CAAuBtF,IAAI,CAACH,KAA5B;AACH;;AAED2F,EAAAA,0BAA0B,CAACxF,IAAI,GAAG,KAAKyB,IAAb,EAAmB;AACzC,QAAIzB,IAAI,KAAK,IAAb,EAAmB;;AAEnB,SAAK,IAAI6B,KAAT,IAAkB7B,IAAI,CAACF,UAAvB,EAAmC;AAC/B,WAAK,IAAIyF,OAAT,IAAoBvF,IAAI,CAACF,UAAL,CAAgB+B,KAAhB,CAApB,EAA4C;AACxC,YAAIA,KAAK,KAAK,SAAd,EAAyB;AACrB7B,UAAAA,IAAI,CAACF,UAAL,CAAgB+B,KAAhB,EAAuB0D,OAAvB,EAAgC,QAAhC,IAA4C,IAA5C;AACH,SAFD,MAGK;AACDvF,UAAAA,IAAI,CAACF,UAAL,CAAgB+B,KAAhB,EAAuB0D,OAAvB,EAAgC,QAAhC,IAA4C,KAA5C;AACH;;AAEDvF,QAAAA,IAAI,CAACF,UAAL,CAAgB+B,KAAhB,EAAuB0D,OAAvB,EAAgC,OAAhC,IAA2C,GAA3C;AACH;AACJ;;AAED,SAAKC,0BAAL,CAAgCxF,IAAI,CAACJ,IAArC;AACA,SAAK4F,0BAAL,CAAgCxF,IAAI,CAACH,KAArC;AACH;;AAED4F,EAAAA,qBAAqB,CAACzF,IAAI,GAAG,KAAKyB,IAAb,EAAmB;AACpC,QAAIzB,IAAI,KAAK,IAAb,EAAmB;AAEnBA,IAAAA,IAAI,CAACO,cAAL,CAAoB,QAApB,IAAgC,KAAhC;AACAP,IAAAA,IAAI,CAACO,cAAL,CAAoB,OAApB,IAA+B,CAA/B;AAEA,SAAKkF,qBAAL,CAA2BzF,IAAI,CAACJ,IAAhC;AACA,SAAK6F,qBAAL,CAA2BzF,IAAI,CAACH,KAAhC;AACH;;AAED6F,EAAAA,yBAAyB,CAACC,KAAD,EAAQ3F,IAAI,GAAG,KAAKyB,IAApB,EAA0BvB,KAAK,GAAG,GAAlC,EAAuC;AAC5D,QAAIF,IAAI,KAAK,IAAb,EAAmB,OAAOE,KAAP;;AAEnB,QAAI0F,MAAM,GAAG5F,IAAI,KAAK,KAAKyB,IAAd,GAAqBvB,KAArB,GAA6BA,KAAK,GAAG,IAAlD;;AAEAF,IAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,IAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C8F,MAAM,GAAG,GAAvD;AACA5F,IAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,IAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C8F,MAA9C;;AAEA,QAAID,KAAK,KAAK,WAAd,EAA2B;AACvBC,MAAAA,MAAM,IAAI,IAAV;AACA5F,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C8F,MAA9C;AACH;;AAEDA,IAAAA,MAAM,GAAG,KAAKF,yBAAL,CAA+BC,KAA/B,EAAsC3F,IAAI,CAACJ,IAA3C,EAAiDgG,MAAjD,CAAT;;AAEA,QAAID,KAAK,KAAK,UAAd,EAA0B;AACtBC,MAAAA,MAAM,IAAI,IAAV;AACA5F,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C8F,MAA9C;AACH;;AAEDA,IAAAA,MAAM,GAAG,KAAKF,yBAAL,CAA+BC,KAA/B,EAAsC3F,IAAI,CAACH,KAA3C,EAAkD+F,MAAlD,CAAT;;AAEA,QAAID,KAAK,KAAK,YAAd,EAA4B;AACxBC,MAAAA,MAAM,IAAI,IAAV;AACA5F,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C8F,MAA9C;AACH;;AAED5F,IAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,IAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C8F,MAA9C;AAEA,WAAOA,MAAP;AACH;;AAEDC,EAAAA,yBAAyB,GAAG;AACxB,QAAIX,KAAK,GAAG,IAAI5F,KAAJ,EAAZ;AAEA,QAAIY,KAAK,GAAG,GAAZ;;AAEA,QAAI,KAAKuB,IAAT,EAAe;AACXyD,MAAAA,KAAK,CAACC,IAAN,CAAW,KAAK1D,IAAhB;AAEA,WAAKA,IAAL,CAAU3B,UAAV,CAAqB,SAArB,EAAgC,MAAhC,EAAwC,QAAxC,IAAoD,IAApD;AACA,WAAK2B,IAAL,CAAU3B,UAAV,CAAqB,SAArB,EAAgC,MAAhC,EAAwC,OAAxC,IAAmDI,KAAnD;AACH,KALD,MAMK,CACD;AACH;;AAED,WAAQ,CAAEgF,KAAK,CAACE,KAAN,EAAV,EAA0B;AACtB,UAAIpF,IAAI,GAAGkF,KAAK,CAACG,KAAN,EAAX;;AAEA,UAAIrF,IAAJ,EAAU;AACN,YAAIA,IAAI,CAACJ,IAAT,EAAe;AACXsF,UAAAA,KAAK,CAACC,IAAN,CAAWnF,IAAI,CAACJ,IAAhB;AAEAM,UAAAA,KAAK,IAAI,IAAT;;AACA,eAAK,IAAIqF,OAAT,IAAoBvF,IAAI,CAACJ,IAAL,CAAUE,UAAV,CAAqB,SAArB,CAApB,EAAqD;AACjDE,YAAAA,IAAI,CAACJ,IAAL,CAAUE,UAAV,CAAqB,SAArB,EAAgCyF,OAAhC,EAAyC,QAAzC,IAAqD,IAArD;AACAvF,YAAAA,IAAI,CAACJ,IAAL,CAAUE,UAAV,CAAqB,SAArB,EAAgCyF,OAAhC,EAAyC,OAAzC,IAAoDrF,KAApD;AACH;AACJ;;AAED,YAAIF,IAAI,CAACH,KAAT,EAAgB;AACZqF,UAAAA,KAAK,CAACC,IAAN,CAAWnF,IAAI,CAACH,KAAhB;AAEAK,UAAAA,KAAK,IAAI,IAAT;;AACA,eAAK,IAAIqF,OAAT,IAAoBvF,IAAI,CAACH,KAAL,CAAWC,UAAX,CAAsB,SAAtB,CAApB,EAAsD;AAClDE,YAAAA,IAAI,CAACH,KAAL,CAAWC,UAAX,CAAsB,SAAtB,EAAiCyF,OAAjC,EAA0C,QAA1C,IAAsD,IAAtD;AACAvF,YAAAA,IAAI,CAACH,KAAL,CAAWC,UAAX,CAAsB,SAAtB,EAAiCyF,OAAjC,EAA0C,OAA1C,IAAqDrF,KAArD;AACH;AACJ;;AAEDA,QAAAA,KAAK,IAAI,IAAT;;AACA,aAAK,IAAIqF,OAAT,IAAoBvF,IAAI,CAACF,UAAL,CAAgB,SAAhB,CAApB,EAAgD;AAC5CE,UAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2ByF,OAA3B,EAAoC,QAApC,IAAgD,IAAhD;AACAvF,UAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2ByF,OAA3B,EAAoC,OAApC,IAA+CrF,KAA/C;AACH;AACJ;AACJ;AACJ;;AAED4F,EAAAA,mBAAmB,CAAC9F,IAAI,GAAG,KAAKyB,IAAb,EAAmBvB,KAAK,GAAG,GAA3B,EAAgC;AAC/C,QAAK,CAAE,KAAKyB,WAAZ,EAA0B;;AAE1B,QAAI3B,IAAI,KAAK,IAAb,EAAmB;AACf,UAAIA,IAAI,KAAK,KAAKyB,IAAlB,EAAwB,CACpB;AACH;AACJ,KAJD,MAKK;AACD,UAAI,KAAKE,WAAL,KAAqB3B,IAAI,CAACL,KAA9B,EAAqC;AACjCK,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAAK,GAAG,IAAtD;AACH,OAHD,MAIK,IAAI,KAAKyB,WAAL,GAAmB3B,IAAI,CAACL,KAA5B,EACD,KAAKmG,mBAAL,CAAyB9F,IAAI,CAACJ,IAA9B,EAAoCM,KAAK,GAAG,IAA5C,EADC,KAGD,KAAK4F,mBAAL,CAAyB9F,IAAI,CAACH,KAA9B,EAAqCK,KAAK,GAAG,IAA7C;;AAEJF,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAAK,GAAG,GAAtD;AACAF,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAA9C;AACH;AACJ;;AAED6F,EAAAA,mBAAmB,CAAC/F,IAAI,GAAG,KAAKyB,IAAb,EAAmBvB,KAAK,GAAG,GAA3B,EAAgC;AAC/C,QAAK,CAAE,KAAKyB,WAAP,IAAsB,CAAE3B,IAA7B,EAAoC,OAApC,KACK;AACD,UAAI,KAAK2B,WAAL,KAAqB3B,IAAI,CAACL,KAA9B,EAAqC;AACjC,aAAKiC,UAAL,GAAkB5B,IAAlB;AACA;AACH,OAHD,MAIK,IAAI,KAAK2B,WAAL,GAAmB3B,IAAI,CAACL,KAA5B,EACD,KAAKoG,mBAAL,CAAyB/F,IAAI,CAACJ,IAA9B,EAAoCM,KAAK,GAAG,IAA5C,EADC,KAGD,KAAK6F,mBAAL,CAAyB/F,IAAI,CAACH,KAA9B,EAAqCK,KAAK,GAAG,IAA7C;;AAEJF,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAAK,GAAG,GAAtD;AACAF,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAA9C;AACH;AACJ;;AAED8F,EAAAA,8BAA8B,GAAG;AAC7B,QAAIhG,IAAI,GAAG,KAAK4B,UAAhB;;AAEA,QAAK5B,IAAL,EAAY;AACRA,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C,GAA9C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C,GAA9C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C,IAA9C;AACH;AACJ;;AAEDmG,EAAAA,mBAAmB,CAACjG,IAAI,GAAG,KAAK4B,UAAb,EAAyB1B,KAAK,GAAG,GAAjC,EAAsC;AACrD,QAAK,CAAE,KAAKyB,WAAZ,EAA0B;;AAE1B,QAAI3B,IAAI,KAAK,IAAb,EAAmB;AACf,UAAIA,IAAI,KAAK,KAAKyB,IAAlB,EAAwB,CACpB;AACH;AACJ,KAJD,MAKK;AACDzB,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAAK,GAAG,GAAtD;AACAF,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAA9C;;AAEA,UAAI,KAAKyB,WAAL,KAAqB3B,IAAI,CAACL,KAA9B,EAAqC;AACjCK,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAAK,GAAG,IAAtD;AACAF,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAAK,GAAG,IAAtD;AAEAF,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,KAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAAK,GAAG,IAAtD;AACAF,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,KAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAAK,GAAG,IAAtD;AAEA,aAAK0B,UAAL,GAAkB5B,IAAlB;AACH,OAZD,MAaK,IAAI,KAAK2B,WAAL,GAAmB3B,IAAI,CAACL,KAA5B,EACD,KAAKsG,mBAAL,CAAyBjG,IAAI,CAACJ,IAA9B,EAAoCM,KAAK,GAAG,IAA5C,EADC,KAGD,KAAK+F,mBAAL,CAAyBjG,IAAI,CAACH,KAA9B,EAAqCK,KAAK,GAAG,IAA7C;AACP;AACJ;;AAEDgG,EAAAA,wBAAwB,GAAG;AACvB,QAAIlG,IAAI,GAAG,KAAK4B,UAAhB;;AAEA,QAAK5B,IAAL,EAAY;AACR,UAAKA,IAAI,CAACJ,IAAL,KAAc,IAAd,IAAsBI,IAAI,CAACH,KAAL,KAAe,IAA1C,EAAiD;AAC7CG,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C,IAA9C;AAEAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,KAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C,GAA9C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,KAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C,GAA9C;AAEAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,KAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C,GAA9C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,KAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C,GAA9C;AAEAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C,IAA9C;;AAEA,YAAKE,IAAI,CAACJ,IAAL,KAAc,IAAd,IAAsBI,IAAI,CAACH,KAAL,KAAe,IAA1C,EAAiD;AAC7CG,UAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,KAA/C;AACAE,UAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C,CAA9C;AAEAE,UAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,KAA/C;AACAE,UAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8C,CAA9C;AACH,SAND,MAOK,IAAKE,IAAI,CAACJ,IAAL,KAAc,IAAnB,EAA0B;AAC3BI,UAAAA,IAAI,CAACH,KAAL,CAAWC,UAAX,CAAsB,SAAtB,EAAiC,MAAjC,EAAyC,QAAzC,IAAqD,KAArD;AACAE,UAAAA,IAAI,CAACH,KAAL,CAAWC,UAAX,CAAsB,SAAtB,EAAiC,MAAjC,EAAyC,OAAzC,IAAoD,GAApD;AAEAE,UAAAA,IAAI,CAACH,KAAL,CAAWU,cAAX,CAA0B,QAA1B,IAAsC,IAAtC;AACAP,UAAAA,IAAI,CAACH,KAAL,CAAWU,cAAX,CAA0B,OAA1B,IAAqC,IAArC;AACAP,UAAAA,IAAI,CAACH,KAAL,CAAWU,cAAX,CAA0B,KAA1B,EAAiC,SAAjC,IAA8C;AAC1C,qBAAS,MADiC;AAE1C,uBAAW,MAF+B;AAG1C,yBAAa;AAH6B,WAA9C;AAMA,eAAK4F,gCAAL,CAAsCnG,IAAI,CAACH,KAA3C;AACH,SAbI,MAcA,IAAKG,IAAI,CAACH,KAAL,KAAe,IAApB,EAA2B;AAC5BG,UAAAA,IAAI,CAACJ,IAAL,CAAUE,UAAV,CAAqB,SAArB,EAAgC,MAAhC,EAAwC,QAAxC,IAAoD,KAApD;AACAE,UAAAA,IAAI,CAACJ,IAAL,CAAUE,UAAV,CAAqB,SAArB,EAAgC,MAAhC,EAAwC,OAAxC,IAAmD,GAAnD;AAEAE,UAAAA,IAAI,CAACJ,IAAL,CAAUW,cAAV,CAAyB,QAAzB,IAAqC,IAArC;AACAP,UAAAA,IAAI,CAACJ,IAAL,CAAUW,cAAV,CAAyB,OAAzB,IAAoC,IAApC;AACAP,UAAAA,IAAI,CAACJ,IAAL,CAAUW,cAAV,CAAyB,KAAzB,EAAgC,SAAhC,IAA6C;AACzC,qBAAS,MADgC;AAEzC,uBAAW,MAF8B;AAGzC,yBAAa;AAH4B,WAA7C;AAMA,eAAK4F,gCAAL,CAAsCnG,IAAI,CAACJ,IAA3C;AACH;AACJ,OApDD,MAqDK;AACD,YAAIM,KAAK,GAAG,KAAKkG,6BAAL,CAAmCpG,IAAI,CAACH,KAAxC,CAAZ,CADC,CAGD;AACA;AAEA;AACA;AAEA;AACA;AACH;AACJ;AACJ;;AAEDsG,EAAAA,gCAAgC,CAACnG,IAAD,EAAOE,KAAK,GAAG,IAAf,EAAqBmG,KAAK,GAAG,IAA7B,EAAmC;AAC/D,QAAIrG,IAAJ,EAAU;AACN,UAAIqG,KAAJ,EAAW;AACPrG,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAA9C;AACH,OAHD,MAIK;AACDF,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAA9C;AACAF,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,QAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAA9C;AACH;;AAED,WAAKiG,gCAAL,CAAsCnG,IAAI,CAACJ,IAA3C,EAAiDM,KAAK,GAAG,GAAzD,EAA8D,KAA9D;AACA,WAAKiG,gCAAL,CAAsCnG,IAAI,CAACH,KAA3C,EAAkDK,KAAK,GAAG,GAA1D,EAA+D,KAA/D;AACH;AACJ;;AAEDkG,EAAAA,6BAA6B,CAACpG,IAAD,EAAOE,KAAK,GAAG,GAAf,EAAoB;AAC7CF,IAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,IAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAAK,GAAG,GAAtD;AACAF,IAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,IAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAA9C;;AAEA,QAAKF,IAAI,CAACJ,IAAV,EAAiB;AACb,aAAO,KAAKwG,6BAAL,CAAmCpG,IAAI,CAACJ,IAAxC,EAA8CM,KAAK,GAAG,IAAtD,CAAP;AACH,KAFD,MAGK;AACD,WAAKyB,WAAL,GAAmB3B,IAAI,CAACL,KAAxB;AAEAK,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAAK,GAAG,IAAtD;AACAF,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,QAAnC,IAA+C,IAA/C;AACAE,MAAAA,IAAI,CAACF,UAAL,CAAgB,SAAhB,EAA2B,MAA3B,EAAmC,OAAnC,IAA8CI,KAAK,GAAG,IAAtD;AAEA,aAAOA,KAAK,GAAG,IAAf;AACH;AACJ;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA8B,EAAAA,OAAO,GAAG;AACN,SAAKqB,KAAL;AACA,SAAKN,iBAAL,CAAuB,EAAvB;AACA,SAAKkC,uBAAL;AACA,SAAKqB,QAAL,CAAc;AAACvG,MAAAA,OAAO,EAAE;AAAV,KAAd;AACH;;AAEDkC,EAAAA,OAAO,GAAG;AACN,SAAKP,WAAL,GAAmB,IAAnB;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAK0D,iBAAL;AACA,SAAKgB,QAAL,CAAc;AAACvG,MAAAA,OAAO,EAAE;AAAV,KAAd;AACH;;AAEDmC,EAAAA,OAAO,GAAG;AACN,SAAKR,WAAL,GAAmB,IAAnB;AACA,SAAKC,WAAL,GAAmB,IAAnB;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAK4D,0BAAL;AACA,SAAKc,QAAL,CAAc;AAACvG,MAAAA,OAAO,EAAE;AAAV,KAAd;AACH;;AAEDoC,EAAAA,OAAO,GAAG;AACN,SAAKuD,yBAAL,CAA+B,UAA/B,EADM,CAEN;;AACA,SAAKY,QAAL,CAAc;AAACvG,MAAAA,OAAO,EAAE;AAAV,KAAd;AACH;;AAEDqC,EAAAA,OAAO,CAAC1C,GAAD,EAAM;AACT,SAAKiC,WAAL,GAAmBjC,GAAnB;AACA,SAAKoG,mBAAL;AACA,SAAKQ,QAAL,CAAc;AAACvG,MAAAA,OAAO,EAAE;AAAV,KAAd;AACH;;AAEDsC,EAAAA,OAAO,GAAG;AACN;AACA,SAAKV,WAAL,GAAmB4E,QAAQ,CAAEC,MAAM,EAAR,CAA3B;AACA,SAAKtD,MAAL,CAAY,KAAKvB,WAAjB;AACA,SAAKoE,mBAAL;AACA,SAAKO,QAAL,CAAc;AAACvG,MAAAA,OAAO,EAAE;AAAV,KAAd;AACH;;AAEDuC,EAAAA,OAAO,GAAG;AACN,SAAK0D,8BAAL;AACA,SAAKM,QAAL,CAAc;AAACvG,MAAAA,OAAO,EAAE;AAAV,KAAd;AACH;;AAEDwC,EAAAA,OAAO,CAAC7C,GAAD,EAAM;AACT;AACA,SAAKgC,WAAL,GAAmBhC,GAAnB;AACA,SAAKiC,WAAL,GAAmBjC,GAAnB;AACA,SAAKkC,UAAL,GAAkB,KAAKH,IAAvB;AACA,SAAKe,OAAL;AACH;;AAEDA,EAAAA,OAAO,GAAG;AACN,SAAKyD,mBAAL;AACA,SAAKK,QAAL,CAAc;AAACvG,MAAAA,OAAO,EAAE;AAAV,KAAd;AACH;;AAED0C,EAAAA,QAAQ,GAAG;AACP,SAAKyD,wBAAL;AACA,SAAKI,QAAL,CAAc;AAACvG,MAAAA,OAAO,EAAE;AAAV,KAAd;AACH;;AAED2C,EAAAA,QAAQ,GAAG,CACV;;AAEDC,EAAAA,QAAQ,GAAG;AACP,SAAK8C,qBAAL;AACA,SAAKa,QAAL,CAAc;AAACvG,MAAAA,OAAO,EAAE;AAAV,KAAd;AACH;;AAED6C,EAAAA,QAAQ,GAAG;AACP,SAAKQ,MAAL,CAAY,KAAK1B,WAAjB;AACA,SAAK+D,qBAAL;AACA,SAAKD,0BAAL;AACA,SAAKc,QAAL,CAAc;AAACvG,MAAAA,OAAO,EAAE;AAAV,KAAd;AACH;;AAED8C,EAAAA,QAAQ,GAAG;AACP,SAAKQ,KAAL;AACH;;AAEDoD,EAAAA,MAAM,GAAG;AACLC,IAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9E,KAAjB;AACA,WACI,0CACI;AAAQ,MAAA,OAAO,EAAI,KAAKG,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,EAEI;AAAQ,MAAA,OAAO,EAAI,KAAKC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFJ,EAGI;AAAQ,MAAA,OAAO,EAAI,KAAKC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAHJ,EAII;AAAQ,MAAA,OAAO,EAAI,KAAKC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJJ,EAKI;AAAQ,MAAA,OAAO,EAAI,KAAKC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ,EAMI;AAAQ,MAAA,OAAO,EAAI,KAAKC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ,EAOI;AAAQ,MAAA,OAAO,EAAI,KAAKC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAPJ,EAQI;AAAQ,MAAA,OAAO,EAAI,KAAKC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCARJ,EASI;AAAQ,MAAA,OAAO,EAAI,KAAKC,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBATJ,EAUI;AAAQ,MAAA,OAAO,EAAI,KAAKC,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAVJ,EAWI;AAAQ,MAAA,OAAO,EAAI,KAAKC,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAXJ,EAYI;AAAQ,MAAA,OAAO,EAAI,KAAKC,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAZJ,EAaI;AAAQ,MAAA,OAAO,EAAI,KAAKC,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAbJ,EAcI;AAAQ,MAAA,OAAO,EAAI,KAAKC,QAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAdJ,EAgBM,QAAQ,oBAAC,UAAD;AAAY,MAAA,SAAS,EAAI,KAAKhB,KAAL,CAAW+E,SAApC;AAA+C,MAAA,QAAQ,EAAI,KAAK9E,YAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAR,GAA2F,IAhBjG,EAiBM,QAAQ,oBAAC,YAAD;AAAc,MAAA,OAAO,EAAI,sBAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAR,GAA8D,IAjBpE,EAmBI;AACI,MAAA,EAAE,EAAG,KAAKP,IADd;AAEI,MAAA,SAAS,EAAC,MAFd;AAGI,MAAA,KAAK,EAAG;AAACsF,QAAAA,SAAS,EAAE,KAAKnD,cAAL;AAAZ,OAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAKM,KAAKQ,IAAL,EALN,CAnBJ,CADJ;AA8BH;AAED;;;;;;;;;;AAUA;;;;;;;;AA35B0D","sourcesContent":["import React from 'react';\r\nimport{ Transition, CSSTransition } from 'react-transition-group'\r\n\r\nimport InputModal from '../../Additional/InputModal/InputModal.jsx'\r\nimport ErrorMessage from '../../Additional/ErrorMessage/ErrorMessage.jsx'\r\n\r\nimport Queue from '../../Additional/Queue.js'\r\nimport { randomIntFromInverval } from '../../Additional/Helpers.js'\r\n\r\nimport './BinarySearchTree.scss'\r\n\r\nclass BinarySearchTreeNode {\r\n    constructor(val) {\r\n        this.value = val;\r\n        this.left  = null;\r\n        this.right = null;\r\n\r\n        this.animations = {\r\n            initial: {\r\n                node: {\r\n                    active: false, delay: 0\r\n                },\r\n                line: {\r\n                    active: false,  delay: 0\r\n                }\r\n            },\r\n            visited: {\r\n                node: {\r\n                    active: false, delay: 0\r\n                },\r\n                line: {\r\n                    active: false,  delay: 0\r\n                }\r\n            },\r\n            success: {\r\n                node: {\r\n                    active: false, delay: 0\r\n                },\r\n                line: {\r\n                    active: false,  delay: 0\r\n                }\r\n            },\r\n            removed: {\r\n                node: {\r\n                    active: false, delay: 0\r\n                },\r\n                line: {\r\n                    active: false,  delay: 0\r\n                }\r\n            }\r\n        };\r\n\r\n        this.moveAnimations = {\r\n            active: false,\r\n            delay: 0,\r\n            css: {\r\n                entering: {},\r\n                entered:  {},\r\n                exiting:  {},\r\n                exited:   {}\r\n            }\r\n        };\r\n    }\r\n}\r\n\r\nexport default class BinarySearchTree extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.initialStateOperation = 'Initial';\r\n\r\n        this.visibleClasses = {\r\n            appearDone: 'visible',\r\n            enterDone: 'visible',\r\n            exit: 'visible'\r\n        };\r\n        \r\n        this.moveClasses = {\r\n            appearDone: 'move',\r\n            enterDone: 'move',\r\n            exit: 'moved',\r\n            exitActive: 'moved'\r\n        };\r\n\r\n        this.name = 'BinarySearchTree';\r\n        this.key  = 'BST';\r\n        this.root = null;\r\n\r\n        this.removeValue = null;\r\n        this.targetValue = null;\r\n        this.targetNode = null;\r\n\r\n        this.state = {\r\n            initial: false\r\n        };\r\n\r\n        this.receiveInput = this.receiveInput.bind(this);\r\n\r\n        this.action1 = this.action1.bind(this); // temporary\r\n        this.action2 = this.action2.bind(this); // temporary\r\n        this.action3 = this.action3.bind(this); // temporary\r\n        this.action4 = this.action4.bind(this); // temporary\r\n        this.action5 = this.action5.bind(this); // temporary\r\n        this.action6 = this.action6.bind(this); // temporary\r\n        this.action7 = this.action7.bind(this); // temporary\r\n        this.action8 = this.action8.bind(this); // temporary\r\n        this.action9 = this.action9.bind(this); // temporary\r\n        this.action10 = this.action10.bind(this); // temporary\r\n        this.action11 = this.action11.bind(this); // temporary\r\n        this.action12 = this.action12.bind(this); // temporary\r\n        this.action13 = this.action13.bind(this); // temporary\r\n        this.action14 = this.action14.bind(this); // temporary\r\n    }\r\n\r\n    componentDidMount() {\r\n        // call generate function\r\n    }\r\n\r\n    /*static getDerivedStateFromProps(newProps, state) {\r\n        //To-do: async calls and tooltips\r\n        console.log(\"BST::getDerivedStateFromProps::newProps \"  + newProps.operation);\r\n        console.log(\"BST::getDerivedStateFromProps::state.operation \" + state.operation);\r\n        console.log(\"BST::getDerivedStateFromProps::state.animating \" + state.animating);\r\n\r\n        const initialStateOperation = 'Initial';\r\n\r\n        if ( state.animating ) {\r\n            if ( state.operation === initialStateOperation ) {\r\n                return { operation: state.operation, animating: false };\r\n            }\r\n            else {\r\n                return { operation: state.operation };\r\n            }\r\n        }\r\n        else if ( state.operation !== newProps.operation ) {\r\n            return { operation: newProps.operation, animating: true };\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }*/\r\n\r\n    insertNumElements(elements) {\r\n        for (let i = 0; i < elements; ++i) {\r\n            let val = randomIntFromInverval(1, 150);\r\n            if ( this.insert( val ) ) {\r\n                if ( this.height() > 5 ) {\r\n                    this.root = this.remove( val );\r\n                    --i;\r\n                }\r\n            }\r\n            else {\r\n                --i;\r\n            }\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this.root = null;\r\n    }\r\n\r\n    height(node = this.root) {\r\n        if (node === null) return 0;\r\n        return Math.max( this.height(node.left), this.height(node.right) ) + 1;\r\n    }\r\n\r\n    insert(val) {\r\n        if (this.root === null) {\r\n            this.root = new BinarySearchTreeNode(val);\r\n            return true;\r\n        }\r\n        \r\n        let curr = this.root;\r\n\r\n        while (true) {\r\n            if (curr.value === val) {\r\n                //tree contains key already\r\n                return false;\r\n            }\r\n            else if (curr.value < val) {\r\n                if(curr.right === null) {\r\n                    curr.right = new BinarySearchTreeNode(val);\r\n                    return true;\r\n                }\r\n                curr = curr.right;\r\n            }\r\n            else {\r\n                if(curr.left === null) {\r\n                    curr.left = new BinarySearchTreeNode(val);\r\n                    return true;\r\n                }\r\n                curr = curr.left;\r\n            }\r\n        }\r\n    }\r\n\r\n    remove(val, node = this.root) {\r\n        if ( ! val ) return;\r\n\r\n        if ( node === null ) return node;\r\n\r\n        if ( val < node.value ) {\r\n            node.left = this.remove(val, node.left);\r\n        }\r\n        else if ( val > node.value ) {\r\n            node.right = this.remove(val, node.right);\r\n        }\r\n        else {\r\n            if ( node.left === null ) {\r\n                return node.right;\r\n            }\r\n            else if ( node.right === null ) {\r\n                return node.left;\r\n            }\r\n            else {\r\n                node.value = this.inOrderSuccessor(node.right);\r\n                node.right = this.remove(node.value, node.right);\r\n            }\r\n        }\r\n\r\n        return node;\r\n    }\r\n\r\n    inOrderSuccessor(node) {\r\n        if ( node === null ) {\r\n            //error\r\n        }\r\n        else if ( node.left !== null ) {\r\n            return this.inOrderSuccessor(node.left);\r\n        }\r\n        else {\r\n            return node.value;\r\n        }\r\n    }\r\n\r\n    getScaleFactor() {\r\n        let scale_factor = (window.innerWidth - 20) / ( Math.pow(2, this.height() - 1) * 70 );\r\n        return 'scale(' + (scale_factor > 1 ? 1 : scale_factor) + ')';\r\n    }\r\n\r\n    receiveInput(val) {\r\n        alert(val);\r\n    }\r\n\r\n    searchNode(val) {\r\n        this.action5(val);\r\n    }\r\n\r\n    deleteNode(val) {\r\n        this.action8(val);\r\n    }\r\n\r\n    Tree(node = this.root, tree_height = this.height(), curr_height = 0, pos = 'root') {\r\n        if (curr_height === tree_height) return null;\r\n\r\n        const leftChild  = this.Tree(node ? node.left  : null, tree_height, curr_height + 1, 'left');\r\n        const rightChild = this.Tree(node ? node.right : null, tree_height, curr_height + 1, 'right');\r\n        \r\n        const classes = ['node-wrapper', pos].join(' ');\r\n\r\n        if ( node === null ) {\r\n            return (\r\n                <>\r\n                    <div\r\n                        className={classes}\r\n                        node-value='null'\r\n                        node-layer={tree_height - curr_height}>\r\n\r\n                            <div className='node-value' />\r\n\r\n                            {leftChild}\r\n                            {rightChild}\r\n                    </div>\r\n                </>\r\n            );\r\n        }\r\n        else {\r\n            const rootWidth = {\r\n                width: ( node === this.root ) ? Math.pow(2, tree_height - 1) * 70 + 'px' : null\r\n            };\r\n\r\n            return (\r\n                <>\r\n                    <Transition\r\n                        in={node.moveAnimations['active']}\r\n                        timeout={node.moveAnimations['delay']}\r\n                        appear={true}>\r\n\r\n                        {state => (\r\n\r\n                            <div\r\n                                className={classes}\r\n                                node-value={node.value}\r\n                                node-layer={tree_height - curr_height}\r\n                                style={( node === this.root ) ? rootWidth : node.moveAnimations['css'][state]}>\r\n\r\n                                <CSSTransition\r\n                                    in={node.animations['initial']['node']['active']}\r\n                                    timeout={node.animations['initial']['node']['delay']}\r\n                                    classNames={this.visibleClasses}\r\n                                    appear={true}>\r\n\r\n                                    <div className='node-value'>\r\n                                        {this.getNodeHover(node.value)}\r\n                                        {this.getCricle(node)}\r\n                                    </div>\r\n\r\n                                </CSSTransition>\r\n\r\n                                {leftChild}\r\n                                {rightChild}\r\n\r\n                                {this.getConnectingLine(node, pos)}\r\n\r\n                            </div>\r\n                        )}\r\n\r\n                    </Transition>\r\n                </>\r\n            );\r\n        }\r\n    }\r\n\r\n    getCricle(node) {\r\n        return (\r\n            <>\r\n                <svg className='circle node-value-circle' xmlns='http://www.w3.org/2000/svg'>\r\n\r\n                    <circle className='circle node-circle initial' r='24' cx='25' cy='25' fill='none' />\r\n\r\n                    <CSSTransition\r\n                        in={node.animations['visited']['node']['active']}\r\n                        timeout={node.animations['visited']['node']['delay']}\r\n                        classNames={this.visibleClasses}\r\n                        appear={true}>\r\n\r\n                        <svg className='circle node-circle-traversal' xmlns='http://www.w3.org/2000/svg'>\r\n                            <circle className='circle node-circle-background visited' r='24' cx='25' cy='25' fill='none' />\r\n                            <circle className='circle node-circle visited' r='24' cx='25' cy='25' fill='none' />\r\n                        </svg>\r\n\r\n                    </CSSTransition>\r\n\r\n                    <CSSTransition\r\n                        in={node.animations['success']['node']['active']}\r\n                        timeout={node.animations['success']['node']['delay']}\r\n                        classNames={this.visibleClasses}\r\n                        appear={true}>\r\n\r\n                        <svg className='circle node-circle-traversal' xmlns='http://www.w3.org/2000/svg'>\r\n                            <circle className='circle node-circle-background success' r='24' cx='25' cy='25' fill='none' />\r\n                            <circle className='circle node-circle success' r='24' cx='25' cy='25' fill='none' />\r\n                        </svg>\r\n\r\n                    </CSSTransition>\r\n\r\n                    <CSSTransition\r\n                        in={node.animations['removed']['node']['active']}\r\n                        timeout={node.animations['removed']['node']['delay']}\r\n                        classNames={this.visibleClasses}\r\n                        appear={true}>\r\n\r\n                        <svg className='circle node-circle-traversal' xmlns='http://www.w3.org/2000/svg'>\r\n                            <circle className='circle node-circle-background removed' r='24' cx='25' cy='25' fill='none' />\r\n                            <circle className='circle node-circle removed' r='24' cx='25' cy='25' fill='none' />\r\n                        </svg>\r\n\r\n                    </CSSTransition>\r\n                    \r\n                    <text className='text node-value-text' x='50%' y='50%' fill='black' textAnchor='middle' dominantBaseline='central'>\r\n                        {node.value}\r\n                    </text>\r\n\r\n                </svg>\r\n            </>\r\n        );\r\n    }\r\n\r\n    getNodeHover(val) {\r\n        return (\r\n            <>\r\n                <span className='node-hover'>\r\n                    <i className=\"fas fa-search\" onClick={() => this.searchNode(val)} />\r\n                    <span className='search'>\r\n                        <svg className='circle' xmlns='http://www.w3.org/2000/svg'>\r\n                            <circle className='circle node-hover-circle' r='24' cx='25' cy='25' fill='none' />\r\n                        </svg>\r\n                    </span>\r\n\r\n                    <i className=\"fas fa-trash\" onClick={() => this.deleteNode(val)} />\r\n                    <span className='trash'>\r\n                        <svg className='circle' xmlns='http://www.w3.org/2000/svg'>\r\n                            <circle className='circle node-hover-circle' r='24' cx='25' cy='25' fill='none' />\r\n                        </svg>\r\n                    </span>\r\n                </span>\r\n            </>\r\n        );\r\n    }\r\n    \r\n    getConnectingLine(node, pos) {\r\n        if (pos === 'left' || pos === 'right') {\r\n            return (\r\n                <>\r\n                    <CSSTransition\r\n                        in={node.animations['initial']['line']['active']}\r\n                        timeout={node.animations['initial']['line']['delay']}\r\n                        classNames={this.visibleClasses}\r\n                        appear={true}>\r\n\r\n                        <svg className='line node-line' xmlns='http://www.w3.org/2000/svg'>\r\n\r\n                            {this.getLine(pos, 'initial')}\r\n\r\n                            <CSSTransition\r\n                                in={node.animations['visited']['line']['active']}\r\n                                timeout={node.animations['visited']['line']['delay']}\r\n                                classNames={this.visibleClasses}\r\n                                appear={true}>\r\n\r\n                                {this.getLine(pos, 'visited')}\r\n\r\n                            </CSSTransition>\r\n\r\n                            <CSSTransition\r\n                                in={node.animations['success']['line']['active']}\r\n                                timeout={node.animations['success']['line']['delay']}\r\n                                classNames={this.visibleClasses}\r\n                                appear={true}>\r\n\r\n                                {this.getLine(pos, 'success')}\r\n\r\n                            </CSSTransition>\r\n\r\n                            <CSSTransition\r\n                                in={node.animations['removed']['line']['active']}\r\n                                timeout={node.animations['removed']['line']['delay']}\r\n                                classNames={this.visibleClasses}\r\n                                appear={true}>\r\n\r\n                                {this.getLine(pos, 'removed')}\r\n\r\n                            </CSSTransition>\r\n\r\n                        </svg>\r\n\r\n                    </CSSTransition>\r\n                </>\r\n            );\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    getLine(pos, addClass) {\r\n        const classes = ['line', addClass].join(' ');\r\n\r\n        if (pos === 'left')\r\n            return ( <line className={classes} x1='0' y1='50' x2='100%' y2='0' /> );\r\n        else if (pos === 'right')\r\n            return ( <line className={classes} x1='0' y1='0' x2='100%' y2='50' /> );\r\n        else\r\n            return null;\r\n    }\r\n\r\n    setGenerationAnimations() {\r\n        let queue = new Queue();\r\n        queue.push(this.root);\r\n\r\n        let delay = 150;\r\n\r\n        while ( ! queue.empty() ) {\r\n            let node = queue.front();\r\n\r\n            if (node) {\r\n                queue.push(node.left);\r\n                queue.push(node.right);\r\n\r\n                for (let key in node.animations['initial']) {\r\n                    node.animations['initial'][key]['active'] = true;\r\n                    node.animations['initial'][key]['delay'] = delay;\r\n                }\r\n                \r\n                delay += 200;\r\n            }\r\n        }\r\n    }\r\n\r\n    setHideAnimations(node = this.root) {\r\n        if (node === null) return;\r\n\r\n        for (let state in node.animations) {\r\n            for (let element in node.animations[state]) {\r\n                node.animations[state][element]['active'] = false;\r\n                node.animations[state][element]['delay'] = 150;\r\n            }\r\n        }\r\n\r\n        this.setHideAnimations(node.left);\r\n        this.setHideAnimations(node.right);\r\n    }\r\n\r\n    setHideTraversalAnimations(node = this.root) {\r\n        if (node === null) return;\r\n\r\n        for (let state in node.animations) {\r\n            for (let element in node.animations[state]) {\r\n                if (state === 'initial') {\r\n                    node.animations[state][element]['active'] = true;\r\n                }\r\n                else {\r\n                    node.animations[state][element]['active'] = false;\r\n                }\r\n\r\n                node.animations[state][element]['delay'] = 150;\r\n            }\r\n        }\r\n\r\n        this.setHideTraversalAnimations(node.left);\r\n        this.setHideTraversalAnimations(node.right);\r\n    }\r\n\r\n    setHideMoveAnimations(node = this.root) {\r\n        if (node === null) return;\r\n\r\n        node.moveAnimations['active'] = false;\r\n        node.moveAnimations['delay'] = 0;\r\n\r\n        this.setHideMoveAnimations(node.left);\r\n        this.setHideMoveAnimations(node.right);\r\n    }\r\n\r\n    setDFSTraversalAnimations(order, node = this.root, delay = 150) {\r\n        if (node === null) return delay;\r\n\r\n        let _delay = node === this.root ? delay : delay + 1000;\r\n\r\n        node.animations['visited']['node']['active'] = true;\r\n        node.animations['visited']['node']['delay'] = _delay + 500;\r\n        node.animations['visited']['line']['active'] = true;\r\n        node.animations['visited']['line']['delay'] = _delay;\r\n\r\n        if (order === 'Pre-order') {\r\n            _delay += 1000;\r\n            node.animations['success']['node']['active'] = true;\r\n            node.animations['success']['node']['delay'] = _delay;\r\n        }\r\n\r\n        _delay = this.setDFSTraversalAnimations(order, node.left, _delay);\r\n\r\n        if (order === 'In-order') {\r\n            _delay += 1000;\r\n            node.animations['success']['node']['active'] = true;\r\n            node.animations['success']['node']['delay'] = _delay;\r\n        }\r\n\r\n        _delay = this.setDFSTraversalAnimations(order, node.right, _delay);\r\n\r\n        if (order === 'Post-order') {\r\n            _delay += 1000;\r\n            node.animations['success']['node']['active'] = true;\r\n            node.animations['success']['node']['delay'] = _delay;\r\n        }\r\n\r\n        node.animations['success']['line']['active'] = true;\r\n        node.animations['success']['line']['delay'] = _delay;\r\n\r\n        return _delay;\r\n    }\r\n\r\n    setBFSTraversalAnimations() {\r\n        let queue = new Queue();\r\n\r\n        let delay = 150;\r\n\r\n        if (this.root) {\r\n            queue.push(this.root);\r\n\r\n            this.root.animations['visited']['node']['active'] = true;\r\n            this.root.animations['visited']['node']['delay'] = delay;\r\n        }\r\n        else {\r\n            //error..tree is empty\r\n        }\r\n\r\n        while ( ! queue.empty() ) {\r\n            let node = queue.front();\r\n\r\n            if (node) {\r\n                if (node.left) {\r\n                    queue.push(node.left);\r\n\r\n                    delay += 1000;\r\n                    for (let element in node.left.animations['visited']) {\r\n                        node.left.animations['visited'][element]['active'] = true;\r\n                        node.left.animations['visited'][element]['delay'] = delay;\r\n                    }\r\n                }\r\n\r\n                if (node.right) {\r\n                    queue.push(node.right);\r\n\r\n                    delay += 1000;\r\n                    for (let element in node.right.animations['visited']) {\r\n                        node.right.animations['visited'][element]['active'] = true;\r\n                        node.right.animations['visited'][element]['delay'] = delay;\r\n                    }\r\n                }\r\n                \r\n                delay += 1000;\r\n                for (let element in node.animations['success']) {\r\n                    node.animations['success'][element]['active'] = true;\r\n                    node.animations['success'][element]['delay'] = delay;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    setSearchAnimations(node = this.root, delay = 150) {\r\n        if ( ! this.targetValue ) return;\r\n\r\n        if (node === null) {\r\n            if (node === this.root) {\r\n                //show error..empty tree\r\n            }\r\n        }\r\n        else {\r\n            if (this.targetValue === node.value) {\r\n                node.animations['success']['node']['active'] = true;\r\n                node.animations['success']['node']['delay'] = delay + 1250;\r\n            }\r\n            else if (this.targetValue < node.value)\r\n                this.setSearchAnimations(node.left, delay + 1000);\r\n            else\r\n                this.setSearchAnimations(node.right, delay + 1000);\r\n                \r\n            node.animations['visited']['node']['active'] = true;\r\n            node.animations['visited']['node']['delay'] = delay + 500;\r\n            node.animations['visited']['line']['active'] = true;\r\n            node.animations['visited']['line']['delay'] = delay;\r\n        }\r\n    }\r\n\r\n    setInsertAnimations(node = this.root, delay = 150) {\r\n        if ( ! this.targetValue || ! node ) return;\r\n        else {\r\n            if (this.targetValue === node.value) {\r\n                this.targetNode = node;\r\n                return;\r\n            }\r\n            else if (this.targetValue < node.value)\r\n                this.setInsertAnimations(node.left, delay + 1000);\r\n            else\r\n                this.setInsertAnimations(node.right, delay + 1000);\r\n                \r\n            node.animations['visited']['node']['active'] = true;\r\n            node.animations['visited']['node']['delay'] = delay + 500;\r\n            node.animations['visited']['line']['active'] = true;\r\n            node.animations['visited']['line']['delay'] = delay;\r\n        }\r\n    }\r\n\r\n    setInsertionCompleteAnimations() {\r\n        let node = this.targetNode;\r\n\r\n        if ( node ) {\r\n            node.animations['initial']['node']['active'] = true;\r\n            node.animations['initial']['node']['delay'] = 650;\r\n            node.animations['initial']['line']['active'] = true;\r\n            node.animations['initial']['line']['delay'] = 150;\r\n            node.animations['success']['node']['active'] = true;\r\n            node.animations['success']['node']['delay'] = 1250;\r\n        }\r\n    }\r\n\r\n    setRemoveAnimations(node = this.targetNode, delay = 150) {\r\n        if ( ! this.targetValue ) return;\r\n\r\n        if (node === null) {\r\n            if (node === this.root) {\r\n                //show error..empty tree\r\n            }\r\n        }\r\n        else {    \r\n            node.animations['visited']['node']['active'] = true;\r\n            node.animations['visited']['node']['delay'] = delay + 500;\r\n            node.animations['visited']['line']['active'] = true;\r\n            node.animations['visited']['line']['delay'] = delay;\r\n\r\n            if (this.targetValue === node.value) {\r\n                node.animations['removed']['node']['active'] = true;\r\n                node.animations['removed']['node']['delay'] = delay + 1500;\r\n                node.animations['removed']['line']['active'] = true;\r\n                node.animations['removed']['line']['delay'] = delay + 1000;\r\n\r\n                node.animations['initial']['node']['active'] = false;\r\n                node.animations['initial']['node']['delay'] = delay + 1500;\r\n                node.animations['initial']['line']['active'] = false;\r\n                node.animations['initial']['line']['delay'] = delay + 1500;\r\n\r\n                this.targetNode = node;\r\n            }\r\n            else if (this.targetValue < node.value)\r\n                this.setRemoveAnimations(node.left, delay + 1000);\r\n            else\r\n                this.setRemoveAnimations(node.right, delay + 1000);\r\n        }\r\n    }\r\n\r\n    setMoveSubtreeAnimations() {\r\n        let node = this.targetNode;\r\n\r\n        if ( node ) {\r\n            if ( node.left === null || node.right === null ) {\r\n                node.animations['initial']['line']['active'] = true;\r\n                node.animations['initial']['line']['delay'] = 3000;\r\n    \r\n                node.animations['visited']['node']['active'] = false;\r\n                node.animations['visited']['node']['delay'] = 150;\r\n                node.animations['visited']['line']['active'] = false;\r\n                node.animations['visited']['line']['delay'] = 150;\r\n    \r\n                node.animations['removed']['node']['active'] = false;\r\n                node.animations['removed']['node']['delay'] = 150;\r\n                node.animations['removed']['line']['active'] = false;\r\n                node.animations['removed']['line']['delay'] = 150;\r\n    \r\n                node.animations['success']['line']['active'] = true;\r\n                node.animations['success']['line']['delay'] = 3500;\r\n\r\n                if ( node.left === null && node.right === null ) {\r\n                    node.animations['initial']['line']['active'] = false;\r\n                    node.animations['initial']['line']['delay'] = 0;\r\n\r\n                    node.animations['success']['line']['active'] = false;\r\n                    node.animations['success']['line']['delay'] = 0;\r\n                }\r\n                else if ( node.left === null ) {\r\n                    node.right.animations['initial']['line']['active'] = false;\r\n                    node.right.animations['initial']['line']['delay'] = 150;\r\n                    \r\n                    node.right.moveAnimations['active'] = true;\r\n                    node.right.moveAnimations['delay'] = 1000;\r\n                    node.right.moveAnimations['css']['entered'] = {\r\n                        'width': '100%',\r\n                        'z-index': '1000',\r\n                        'transform': 'translate(-50%, -50px)'\r\n                    };\r\n    \r\n                    this.setMoveSubtreeCompleteAnimations(node.right);\r\n                }\r\n                else if ( node.right === null ) {\r\n                    node.left.animations['initial']['line']['active'] = false;\r\n                    node.left.animations['initial']['line']['delay'] = 150;\r\n                    \r\n                    node.left.moveAnimations['active'] = true;\r\n                    node.left.moveAnimations['delay'] = 1000;\r\n                    node.left.moveAnimations['css']['entered'] = {\r\n                        'width': '100%',\r\n                        'z-index': '1000',\r\n                        'transform': 'translate(0, -50px)'\r\n                    };\r\n    \r\n                    this.setMoveSubtreeCompleteAnimations(node.left);\r\n                }\r\n            }\r\n            else {\r\n                let delay = this.setInOrderSuccessorAnimations(node.right);\r\n\r\n                //node.right.animations['initial']['line']['active'] = false;\r\n                //node.right.animations['initial']['line']['delay'] = delay;\r\n\r\n                //node.left.animations['initial']['line']['active'] = false;\r\n                //node.left.animations['initial']['line']['delay'] = delay;\r\n\r\n                //node.animations['success']['line']['active'] = true;\r\n                //node.animations['success']['line']['delay'] = delay;\r\n            }\r\n        }\r\n    }\r\n\r\n    setMoveSubtreeCompleteAnimations(node, delay = 4000, first = true) {\r\n        if (node) {\r\n            if (first) {\r\n                node.animations['success']['node']['active'] = true;\r\n                node.animations['success']['node']['delay'] = delay;\r\n            }\r\n            else {\r\n                node.animations['success']['node']['active'] = true;\r\n                node.animations['success']['node']['delay'] = delay;\r\n                node.animations['success']['line']['active'] = true;\r\n                node.animations['success']['line']['delay'] = delay;\r\n            }\r\n\r\n            this.setMoveSubtreeCompleteAnimations(node.left, delay + 300, false);\r\n            this.setMoveSubtreeCompleteAnimations(node.right, delay + 300, false);\r\n        }\r\n    }\r\n\r\n    setInOrderSuccessorAnimations(node, delay = 150) {\r\n        node.animations['visited']['node']['active'] = true;\r\n        node.animations['visited']['node']['delay'] = delay + 500;\r\n        node.animations['visited']['line']['active'] = true;\r\n        node.animations['visited']['line']['delay'] = delay;\r\n\r\n        if ( node.left ) {\r\n            return this.setInOrderSuccessorAnimations(node.left, delay + 1000);\r\n        }\r\n        else {\r\n            this.targetValue = node.value;\r\n\r\n            node.animations['success']['node']['active'] = true;\r\n            node.animations['success']['node']['delay'] = delay + 1500;\r\n            node.animations['success']['line']['active'] = true;\r\n            node.animations['success']['line']['delay'] = delay + 1000;\r\n\r\n            return delay + 1500;\r\n        }\r\n    }\r\n\r\n    /*remove(val, node = this.root) {\r\n        if ( node === null ) return node;\r\n\r\n        if ( val < node.value ) {\r\n            node.left = this.remove(val, node.left);\r\n        }\r\n        else if ( val > node.value ) {\r\n            node.right = this.remove(val, node.right);\r\n        }\r\n        else {\r\n            if ( node.left === null ) {\r\n                return node.right;\r\n            }\r\n            else if ( node.right === null ) {\r\n                return node.left;\r\n            }\r\n            else {\r\n                node.value = this.inOrderSuccessor(node.right);\r\n                node.right = this.remove(node.value, node.right);\r\n            }\r\n        }\r\n\r\n        return node;\r\n    }\r\n\r\n    inOrderSuccessor(node) {\r\n        if ( node === null ) {\r\n            return node;\r\n        }\r\n        else if ( node.left !== null ) {\r\n            return this.inOrderSuccessor(node.left);\r\n        }\r\n        else {\r\n            return node.value;\r\n        }\r\n    }*/\r\n\r\n    action1() {\r\n        this.reset();\r\n        this.insertNumElements(15);\r\n        this.setGenerationAnimations();\r\n        this.setState({initial: true});\r\n    }\r\n\r\n    action2() {\r\n        this.removeValue = null;\r\n        this.targetValue = null;\r\n        this.targetNode = null;\r\n        this.setHideAnimations();\r\n        this.setState({initial: true});\r\n    }\r\n\r\n    action3() {\r\n        this.removeValue = null;\r\n        this.targetValue = null;\r\n        this.targetNode = null;\r\n        this.setHideTraversalAnimations();\r\n        this.setState({initial: true});\r\n    }\r\n\r\n    action4() {\r\n        this.setDFSTraversalAnimations('In-order');\r\n        //this.setBFSTraversalAnimations();\r\n        this.setState({initial: true});\r\n    }\r\n\r\n    action5(val) {\r\n        this.targetValue = val;\r\n        this.setSearchAnimations();\r\n        this.setState({initial: true});\r\n    }\r\n\r\n    action6() {\r\n        //check if tree has element first..\r\n        this.targetValue = parseInt( prompt() );\r\n        this.insert(this.targetValue);\r\n        this.setInsertAnimations();\r\n        this.setState({initial: true});\r\n    }\r\n\r\n    action7() {\r\n        this.setInsertionCompleteAnimations();\r\n        this.setState({initial: true});\r\n    }\r\n\r\n    action8(val) {\r\n        //check if tree has element first..\r\n        this.removeValue = val;\r\n        this.targetValue = val;\r\n        this.targetNode = this.root;\r\n        this.action9();\r\n    }\r\n\r\n    action9() {\r\n        this.setRemoveAnimations();\r\n        this.setState({initial: true});\r\n    }\r\n\r\n    action10() {\r\n        this.setMoveSubtreeAnimations();\r\n        this.setState({initial: true});\r\n    }\r\n\r\n    action11() {\r\n    }\r\n\r\n    action12() {\r\n        this.setHideMoveAnimations();\r\n        this.setState({initial: true});\r\n    }\r\n\r\n    action13() {\r\n        this.remove(this.removeValue);\r\n        this.setHideMoveAnimations();\r\n        this.setHideTraversalAnimations();\r\n        this.setState({initial: true});\r\n    }\r\n\r\n    action14() {\r\n        this.reset();\r\n    }\r\n\r\n    render() {\r\n        console.log(\"BST::render: \");\r\n        console.log(this.state);\r\n        return (\r\n            <>\r\n                <button onClick = {this.action1}>Generate new tree</button>\r\n                <button onClick = {this.action2}>Hide Tree</button>\r\n                <button onClick = {this.action3}>Hide traversals</button>\r\n                <button onClick = {this.action4}>Traversals</button>\r\n                <button onClick = {this.action5}>Search</button>\r\n                <button onClick = {this.action6}>Insert</button>\r\n                <button onClick = {this.action7}>Insert complete</button>\r\n                <button onClick = {this.action8}>Pre-Remove (call once)</button>\r\n                <button onClick = {this.action9}>Remove step 1</button>\r\n                <button onClick = {this.action10}>Remove step 2</button>\r\n                <button onClick = {this.action11}>n/a</button>\r\n                <button onClick = {this.action12}>Hide moves</button>\r\n                <button onClick = {this.action13}>Remove final</button>\r\n                <button onClick = {this.action14}>Reset</button>\r\n\r\n                { false ? <InputModal operation = {this.state.operation} callback = {this.receiveInput} /> : null }\r\n                { false ? <ErrorMessage message = {\"Error: Tree is empty\"} /> : null }\r\n\r\n                <div\r\n                    id={ this.name }\r\n                    className='tree'\r\n                    style={ {transform: this.getScaleFactor()} }>\r\n\r\n                    { this.Tree() }\r\n\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    /*shouldComponentUpdate(nextProps, nextState) {\r\n        console.log(\"BST::shouldComponentUpdate: \" + nextState.operation);\r\n        if ( nextState.operation === this.initialStateOperation ) {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }*/\r\n\r\n    /*componentDidUpdate() {\r\n        console.log(\"BST::componentDidUpdate: \" + this.state.operation);\r\n        if ( this.state.operation !== this.initialStateOperation ) {\r\n            this.setState({ operation: this.initialStateOperation });\r\n        }\r\n    }*/\r\n}"]},"metadata":{},"sourceType":"module"}